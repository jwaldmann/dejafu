<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Test.DejaFu.SCT</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Test-DejaFu-SCT.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Test-DejaFu-SCT.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">dejafu-0.0.0.0: Overloadable primitives for testable, potentially non-deterministic, concurrency.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Test.DejaFu.SCT</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Types</a></li><li><a href="#g:2">SCT Runners</a></li><li><a href="#g:3">Random Schedulers</a></li><li><a href="#g:4">Schedule Bounding</a></li><li><a href="#g:5">Utilities</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>A runner for concurrent monads to systematically detect
 concurrency errors such as data races and deadlocks.</p><p>As an example, consider this program, which has two locks and a
 shared variable. Two threads are spawned, which claim the locks,
 update the shared variable, and release the locks. The main thread
 waits for them both to terminate, and returns the final result.</p><pre>bad :: MonadConc m =&gt; m Int
bad = do
  a &lt;- newEmptyCVar
  b &lt;- newEmptyCVar

  c &lt;- newCVar 0

  j1 &lt;- spawn $ lock a &gt;&gt; lock b &gt;&gt; modifyCVar_ c (return . succ) &gt;&gt; unlock b &gt;&gt; unlock a
  j2 &lt;- spawn $ lock b &gt;&gt; lock a &gt;&gt; modifyCVar_ c (return . pred) &gt;&gt; unlock a &gt;&gt; unlock b

  takeCVar j1
  takeCVar j2

  takeCVar c</pre><p>The correct result is 0, as it starts out as 0 and is incremented
 and decremented by threads 1 and 2, respectively. However, note the
 order of acquisition of the locks in the two threads. If thread 2
 pre-empts thread 1 between the acquisition of the locks (or if
 thread 1 pre-empts thread 2), a deadlock situation will arise, as
 thread 1 will have lock <code>a</code> and be waiting on <code>b</code>, and thread 2
 will have <code>b</code> and be waiting on <code>a</code>.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">type</span> <a href="#t:SCTScheduler">SCTScheduler</a> s = <a href="Test-DejaFu-Deterministic-Schedulers.html#t:Scheduler">Scheduler</a> (s, <a href="Test-DejaFu-SCT.html#t:SchedTrace">SchedTrace</a>)</li><li class="src short"><span class="keyword">type</span> <a href="#t:SchedTrace">SchedTrace</a> = [(<a href="Test-DejaFu-SCT.html#t:Decision">Decision</a>, [<a href="Test-DejaFu-SCT.html#t:Decision">Decision</a>])]</li><li class="src short"><span class="keyword">type</span> <a href="#t:SCTTrace">SCTTrace</a> = [(<a href="Test-DejaFu-SCT.html#t:Decision">Decision</a>, [<a href="Test-DejaFu-SCT.html#t:Decision">Decision</a>], <a href="Test-DejaFu-Deterministic.html#t:ThreadAction">ThreadAction</a>)]</li><li class="src short"><span class="keyword">data</span> <a href="#t:Decision">Decision</a><ul class="subs"><li>= <a href="#v:Start">Start</a> <a href="Test-DejaFu-Deterministic-Schedulers.html#t:ThreadId">ThreadId</a></li><li>| <a href="#v:Continue">Continue</a></li><li>| <a href="#v:SwitchTo">SwitchTo</a> <a href="Test-DejaFu-Deterministic-Schedulers.html#t:ThreadId">ThreadId</a></li></ul></li><li class="src short"><a href="#v:runSCT">runSCT</a> ::  <a href="Test-DejaFu-SCT.html#t:SCTScheduler">SCTScheduler</a> s -&gt; s -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Int.html#t:Int">Int</a> -&gt; (<span class="keyword">forall</span> t. <a href="Test-DejaFu-Deterministic.html#t:Conc">Conc</a> t a) -&gt; [(<a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#t:Maybe">Maybe</a> a, <a href="Test-DejaFu-SCT.html#t:SCTTrace">SCTTrace</a>)]</li><li class="src short"><a href="#v:runSCTIO">runSCTIO</a> ::  <a href="Test-DejaFu-SCT.html#t:SCTScheduler">SCTScheduler</a> s -&gt; s -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Int.html#t:Int">Int</a> -&gt; (<span class="keyword">forall</span> t. <a href="Test-DejaFu-Deterministic-IO.html#t:Conc">Conc</a> t a) -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/System-IO.html#t:IO">IO</a> [(<a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#t:Maybe">Maybe</a> a, <a href="Test-DejaFu-SCT.html#t:SCTTrace">SCTTrace</a>)]</li><li class="src short"><a href="#v:runSCT-39-">runSCT'</a> ::  <a href="Test-DejaFu-SCT.html#t:SCTScheduler">SCTScheduler</a> s -&gt; (s, g) -&gt; ((s, g) -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Bool.html#t:Bool">Bool</a>) -&gt; ((s, g) -&gt; <a href="Test-DejaFu-SCT.html#t:SCTTrace">SCTTrace</a> -&gt; (s, g)) -&gt; (<span class="keyword">forall</span> t. <a href="Test-DejaFu-Deterministic.html#t:Conc">Conc</a> t a) -&gt; [(<a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#t:Maybe">Maybe</a> a, <a href="Test-DejaFu-SCT.html#t:SCTTrace">SCTTrace</a>)]</li><li class="src short"><a href="#v:runSCTIO-39-">runSCTIO'</a> ::  <a href="Test-DejaFu-SCT.html#t:SCTScheduler">SCTScheduler</a> s -&gt; (s, g) -&gt; ((s, g) -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Bool.html#t:Bool">Bool</a>) -&gt; ((s, g) -&gt; <a href="Test-DejaFu-SCT.html#t:SCTTrace">SCTTrace</a> -&gt; (s, g)) -&gt; (<span class="keyword">forall</span> t. <a href="Test-DejaFu-Deterministic-IO.html#t:Conc">Conc</a> t a) -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/System-IO.html#t:IO">IO</a> [(<a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#t:Maybe">Maybe</a> a, <a href="Test-DejaFu-SCT.html#t:SCTTrace">SCTTrace</a>)]</li><li class="src short"><a href="#v:sctRandom">sctRandom</a> :: RandomGen g =&gt; <a href="Test-DejaFu-SCT.html#t:SCTScheduler">SCTScheduler</a> g</li><li class="src short"><a href="#v:sctRandomNP">sctRandomNP</a> :: RandomGen g =&gt; <a href="Test-DejaFu-SCT.html#t:SCTScheduler">SCTScheduler</a> g</li><li class="src short"><a href="#v:sctBounded">sctBounded</a> ::  (<a href="Test-DejaFu-SCT.html#t:SCTTrace">SCTTrace</a> -&gt; [[<a href="Test-DejaFu-SCT.html#t:Decision">Decision</a>]]) -&gt; (<a href="Test-DejaFu-SCT.html#t:SCTTrace">SCTTrace</a> -&gt; [[<a href="Test-DejaFu-SCT.html#t:Decision">Decision</a>]]) -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Int.html#t:Int">Int</a> -&gt; (<span class="keyword">forall</span> t. <a href="Test-DejaFu-Deterministic.html#t:Conc">Conc</a> t a) -&gt; [(<a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#t:Maybe">Maybe</a> a, <a href="Test-DejaFu-SCT.html#t:SCTTrace">SCTTrace</a>)]</li><li class="src short"><a href="#v:sctBoundedIO">sctBoundedIO</a> ::  (<a href="Test-DejaFu-SCT.html#t:SCTTrace">SCTTrace</a> -&gt; [[<a href="Test-DejaFu-SCT.html#t:Decision">Decision</a>]]) -&gt; (<a href="Test-DejaFu-SCT.html#t:SCTTrace">SCTTrace</a> -&gt; [[<a href="Test-DejaFu-SCT.html#t:Decision">Decision</a>]]) -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Int.html#t:Int">Int</a> -&gt; (<span class="keyword">forall</span> t. <a href="Test-DejaFu-Deterministic-IO.html#t:Conc">Conc</a> t a) -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/System-IO.html#t:IO">IO</a> [(<a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#t:Maybe">Maybe</a> a, <a href="Test-DejaFu-SCT.html#t:SCTTrace">SCTTrace</a>)]</li><li class="src short"><a href="#v:sctPreBound">sctPreBound</a> ::  <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Int.html#t:Int">Int</a> -&gt; (<span class="keyword">forall</span> t. <a href="Test-DejaFu-Deterministic.html#t:Conc">Conc</a> t a) -&gt; [(<a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#t:Maybe">Maybe</a> a, <a href="Test-DejaFu-SCT.html#t:SCTTrace">SCTTrace</a>)]</li><li class="src short"><a href="#v:sctPreBoundIO">sctPreBoundIO</a> ::  <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Int.html#t:Int">Int</a> -&gt; (<span class="keyword">forall</span> t. <a href="Test-DejaFu-Deterministic-IO.html#t:Conc">Conc</a> t a) -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/System-IO.html#t:IO">IO</a> [(<a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#t:Maybe">Maybe</a> a, <a href="Test-DejaFu-SCT.html#t:SCTTrace">SCTTrace</a>)]</li><li class="src short"><a href="#v:sctDelayBound">sctDelayBound</a> ::  <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Int.html#t:Int">Int</a> -&gt; (<span class="keyword">forall</span> t. <a href="Test-DejaFu-Deterministic.html#t:Conc">Conc</a> t a) -&gt; [(<a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#t:Maybe">Maybe</a> a, <a href="Test-DejaFu-SCT.html#t:SCTTrace">SCTTrace</a>)]</li><li class="src short"><a href="#v:sctDelayBoundIO">sctDelayBoundIO</a> ::  <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Int.html#t:Int">Int</a> -&gt; (<span class="keyword">forall</span> t. <a href="Test-DejaFu-Deterministic-IO.html#t:Conc">Conc</a> t a) -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/System-IO.html#t:IO">IO</a> [(<a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#t:Maybe">Maybe</a> a, <a href="Test-DejaFu-SCT.html#t:SCTTrace">SCTTrace</a>)]</li><li class="src short"><a href="#v:makeSCT">makeSCT</a> ::  <a href="Test-DejaFu-Deterministic-Schedulers.html#t:Scheduler">Scheduler</a> s -&gt; <a href="Test-DejaFu-SCT.html#t:SCTScheduler">SCTScheduler</a> s</li><li class="src short"><a href="#v:preEmpCount">preEmpCount</a> :: [<a href="Test-DejaFu-SCT.html#t:Decision">Decision</a>] -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Int.html#t:Int">Int</a></li><li class="src short"><a href="#v:showTrace">showTrace</a> :: <a href="Test-DejaFu-SCT.html#t:SchedTrace">SchedTrace</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-String.html#t:String">String</a></li></ul></div><div id="interface"><h1 id="g:1">Types</h1><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:SCTScheduler" class="def">SCTScheduler</a> s = <a href="Test-DejaFu-Deterministic-Schedulers.html#t:Scheduler">Scheduler</a> (s, <a href="Test-DejaFu-SCT.html#t:SchedTrace">SchedTrace</a>) <a href="src/Test-DejaFu-SCT-Internal.html#SCTScheduler" class="link">Source</a></p><div class="doc"><p>An <code>SCTScheduler</code> is like a regular <code><a href="Test-DejaFu-Deterministic-Schedulers.html#t:Scheduler">Scheduler</a></code>, except it builds
 a trace of scheduling decisions made.</p><p>If implementing your own scheduler, note that the <code><a href="Test-DejaFu-SCT.html#t:SchedTrace">SchedTrace</a></code> is
 built in reverse, as this is more efficient than appending to the
 list every time, also note that the scheduler is not called before
 starting the first thread, as there is only one possible decision.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:SchedTrace" class="def">SchedTrace</a> = [(<a href="Test-DejaFu-SCT.html#t:Decision">Decision</a>, [<a href="Test-DejaFu-SCT.html#t:Decision">Decision</a>])] <a href="src/Test-DejaFu-SCT-Internal.html#SchedTrace" class="link">Source</a></p><div class="doc"><p>A <code>SchedTrace</code> is just a list of all the decisions that were made,
 with the alternative decisions that could have been made at each
 step.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:SCTTrace" class="def">SCTTrace</a> = [(<a href="Test-DejaFu-SCT.html#t:Decision">Decision</a>, [<a href="Test-DejaFu-SCT.html#t:Decision">Decision</a>], <a href="Test-DejaFu-Deterministic.html#t:ThreadAction">ThreadAction</a>)] <a href="src/Test-DejaFu-SCT-Internal.html#SCTTrace" class="link">Source</a></p><div class="doc"><p>An <code>SCTTrace</code> is a combined <code><a href="Test-DejaFu-SCT.html#t:SchedTrace">SchedTrace</a></code> and <code><a href="Test-DejaFu-Deterministic.html#t:Trace">Trace</a></code>.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Decision" class="def">Decision</a> <a href="src/Test-DejaFu-SCT-Internal.html#Decision" class="link">Source</a></p><div class="doc"><p>Scheduling decisions are based on the state of the running
 program, and so we can capture some of that state in recording what
 specific decision we made.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Start" class="def">Start</a> <a href="Test-DejaFu-Deterministic-Schedulers.html#t:ThreadId">ThreadId</a></td><td class="doc"><p>Start a new thread, because the last was blocked (or it's the
 start of computation).</p></td></tr><tr><td class="src"><a name="v:Continue" class="def">Continue</a></td><td class="doc"><p>Continue running the last thread for another step.</p></td></tr><tr><td class="src"><a name="v:SwitchTo" class="def">SwitchTo</a> <a href="Test-DejaFu-Deterministic-Schedulers.html#t:ThreadId">ThreadId</a></td><td class="doc"><p>Pre-empt the running thread, and switch to another.</p></td></tr></table></div><div class="subs instances"><p id="control.i:Decision" class="caption collapser" onclick="toggleSection('i:Decision')">Instances</p><div id="section.i:Decision" class="show"><table><tr><td class="src"><a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Eq.html#t:Eq">Eq</a> <a href="Test-DejaFu-SCT.html#t:Decision">Decision</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Text-Show.html#t:Show">Show</a> <a href="Test-DejaFu-SCT.html#t:Decision">Decision</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="https://hackage.haskell.org/package/deepseq-1.3.0.2/docs/Control-DeepSeq.html#t:NFData">NFData</a> <a href="Test-DejaFu-SCT.html#t:Decision">Decision</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><h1 id="g:2">SCT Runners</h1><div class="top"><p class="src"><a name="v:runSCT" class="def">runSCT</a> ::  <a href="Test-DejaFu-SCT.html#t:SCTScheduler">SCTScheduler</a> s -&gt; s -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Int.html#t:Int">Int</a> -&gt; (<span class="keyword">forall</span> t. <a href="Test-DejaFu-Deterministic.html#t:Conc">Conc</a> t a) -&gt; [(<a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#t:Maybe">Maybe</a> a, <a href="Test-DejaFu-SCT.html#t:SCTTrace">SCTTrace</a>)] <a href="src/Test-DejaFu-SCT-Internal.html#runSCT" class="link">Source</a></p><div class="doc"><p>Run a concurrent program under a given scheduler a number of
 times, collecting the results and the scheduling that gave rise to
 them.</p><p>The initial state for each run is the final state of the last run,
 so it is important that the scheduler actually maintain some
 internal state, or all the results will be identical.</p></div></div><div class="top"><p class="src"><a name="v:runSCTIO" class="def">runSCTIO</a> ::  <a href="Test-DejaFu-SCT.html#t:SCTScheduler">SCTScheduler</a> s -&gt; s -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Int.html#t:Int">Int</a> -&gt; (<span class="keyword">forall</span> t. <a href="Test-DejaFu-Deterministic-IO.html#t:Conc">Conc</a> t a) -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/System-IO.html#t:IO">IO</a> [(<a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#t:Maybe">Maybe</a> a, <a href="Test-DejaFu-SCT.html#t:SCTTrace">SCTTrace</a>)] <a href="src/Test-DejaFu-SCT-Internal.html#runSCTIO" class="link">Source</a></p><div class="doc"><p>A varant of <code><a href="Test-DejaFu-SCT.html#v:runSCT">runSCT</a></code> for concurrent programs that do <code><a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/System-IO.html#t:IO">IO</a></code>.</p><p>Warning! The IO will be executed lots of times, in lots of
 interleavings! Be very confident that nothing in a <code>liftIO</code> can
 block on the action of another thread, or you risk deadlocking this
 function!</p></div></div><div class="top"><p class="src"><a name="v:runSCT-39-" class="def">runSCT'</a> <a href="src/Test-DejaFu-SCT-Internal.html#runSCT%27" class="link">Source</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Test-DejaFu-SCT.html#t:SCTScheduler">SCTScheduler</a> s</td><td class="doc"><p>The scheduler</p></td></tr><tr><td class="src">-&gt; (s, g)</td><td class="doc"><p>The scheduler's and runner's initial states</p></td></tr><tr><td class="src">-&gt; ((s, g) -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Bool.html#t:Bool">Bool</a>)</td><td class="doc"><p>Termination decider</p></td></tr><tr><td class="src">-&gt; ((s, g) -&gt; <a href="Test-DejaFu-SCT.html#t:SCTTrace">SCTTrace</a> -&gt; (s, g))</td><td class="doc"><p>State step function</p></td></tr><tr><td class="src">-&gt; (<span class="keyword">forall</span> t. <a href="Test-DejaFu-Deterministic.html#t:Conc">Conc</a> t a)</td><td class="doc"><p>Conc program</p></td></tr><tr><td class="src">-&gt; [(<a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#t:Maybe">Maybe</a> a, <a href="Test-DejaFu-SCT.html#t:SCTTrace">SCTTrace</a>)]</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Run a concurrent program under a given scheduler, where the SCT
 runner itself maintains some internal state, and has a function to
 produce a new scheduler state for each run, and decide termination
 based on the internal state.</p><p>Note: the state step function takes the state returned by the
 scheduler, not the initial state!</p></div></div><div class="top"><p class="src"><a name="v:runSCTIO-39-" class="def">runSCTIO'</a> ::  <a href="Test-DejaFu-SCT.html#t:SCTScheduler">SCTScheduler</a> s -&gt; (s, g) -&gt; ((s, g) -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Bool.html#t:Bool">Bool</a>) -&gt; ((s, g) -&gt; <a href="Test-DejaFu-SCT.html#t:SCTTrace">SCTTrace</a> -&gt; (s, g)) -&gt; (<span class="keyword">forall</span> t. <a href="Test-DejaFu-Deterministic-IO.html#t:Conc">Conc</a> t a) -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/System-IO.html#t:IO">IO</a> [(<a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#t:Maybe">Maybe</a> a, <a href="Test-DejaFu-SCT.html#t:SCTTrace">SCTTrace</a>)] <a href="src/Test-DejaFu-SCT-Internal.html#runSCTIO%27" class="link">Source</a></p><div class="doc"><p>A variant of runSCT' for concurrent programs that do IO.</p><p>Warning! The IO will be executed lots of times, in lots of
 interleavings! Be very confident that nothing in a <code>liftIO</code> can
 block on the action of another thread, or you risk deadlocking this
 function!</p></div></div><h1 id="g:3">Random Schedulers</h1><div class="top"><p class="src"><a name="v:sctRandom" class="def">sctRandom</a> :: RandomGen g =&gt; <a href="Test-DejaFu-SCT.html#t:SCTScheduler">SCTScheduler</a> g <a href="src/Test-DejaFu-SCT.html#sctRandom" class="link">Source</a></p><div class="doc"><p>A simple pre-emptive random scheduler.</p></div></div><div class="top"><p class="src"><a name="v:sctRandomNP" class="def">sctRandomNP</a> :: RandomGen g =&gt; <a href="Test-DejaFu-SCT.html#t:SCTScheduler">SCTScheduler</a> g <a href="src/Test-DejaFu-SCT.html#sctRandomNP" class="link">Source</a></p><div class="doc"><p>A random scheduler with no pre-emption.</p></div></div><h1 id="g:4">Schedule Bounding</h1><div class="doc"><p>Schedule bounding is a means of cutting down the search space of
 schedules, by taking advantage of some intrinsic properties of
 schedules: such as the number of pre-emptions (pre-emption
 bounding), or the number of deviations from a deterministic
 scheduler (delay bounding); and then exploring all schedules
 within the bound.</p></div><div class="top"><p class="src"><a name="v:sctBounded" class="def">sctBounded</a> <a href="src/Test-DejaFu-SCT-Bounding.html#sctBounded" class="link">Source</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (<a href="Test-DejaFu-SCT.html#t:SCTTrace">SCTTrace</a> -&gt; [[<a href="Test-DejaFu-SCT.html#t:Decision">Decision</a>]])</td><td class="doc"><p>Sibling generation function.</p></td></tr><tr><td class="src">-&gt; (<a href="Test-DejaFu-SCT.html#t:SCTTrace">SCTTrace</a> -&gt; [[<a href="Test-DejaFu-SCT.html#t:Decision">Decision</a>]])</td><td class="doc"><p>Child generation function.</p></td></tr><tr><td class="src">-&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>Bound, anything &lt; 0 will be interpreted as no bound.</p></td></tr><tr><td class="src">-&gt; (<span class="keyword">forall</span> t. <a href="Test-DejaFu-Deterministic.html#t:Conc">Conc</a> t a)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; [(<a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#t:Maybe">Maybe</a> a, <a href="Test-DejaFu-SCT.html#t:SCTTrace">SCTTrace</a>)]</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>An SCT runner using schedule bounding.</p></div></div><div class="top"><p class="src"><a name="v:sctBoundedIO" class="def">sctBoundedIO</a> ::  (<a href="Test-DejaFu-SCT.html#t:SCTTrace">SCTTrace</a> -&gt; [[<a href="Test-DejaFu-SCT.html#t:Decision">Decision</a>]]) -&gt; (<a href="Test-DejaFu-SCT.html#t:SCTTrace">SCTTrace</a> -&gt; [[<a href="Test-DejaFu-SCT.html#t:Decision">Decision</a>]]) -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Int.html#t:Int">Int</a> -&gt; (<span class="keyword">forall</span> t. <a href="Test-DejaFu-Deterministic-IO.html#t:Conc">Conc</a> t a) -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/System-IO.html#t:IO">IO</a> [(<a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#t:Maybe">Maybe</a> a, <a href="Test-DejaFu-SCT.html#t:SCTTrace">SCTTrace</a>)] <a href="src/Test-DejaFu-SCT-Bounding.html#sctBoundedIO" class="link">Source</a></p><div class="doc"><p>Variant of <code><a href="Test-DejaFu-SCT.html#v:sctBounded">sctBounded</a></code> using <code><a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/System-IO.html#t:IO">IO</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:sctPreBound" class="def">sctPreBound</a> ::  <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Int.html#t:Int">Int</a> -&gt; (<span class="keyword">forall</span> t. <a href="Test-DejaFu-Deterministic.html#t:Conc">Conc</a> t a) -&gt; [(<a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#t:Maybe">Maybe</a> a, <a href="Test-DejaFu-SCT.html#t:SCTTrace">SCTTrace</a>)] <a href="src/Test-DejaFu-SCT-Bounding.html#sctPreBound" class="link">Source</a></p><div class="doc"><p>An SCT runner using a pre-emption bounding scheduler. Schedules
 are explored systematically, in a depth-first fashion.</p></div></div><div class="top"><p class="src"><a name="v:sctPreBoundIO" class="def">sctPreBoundIO</a> ::  <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Int.html#t:Int">Int</a> -&gt; (<span class="keyword">forall</span> t. <a href="Test-DejaFu-Deterministic-IO.html#t:Conc">Conc</a> t a) -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/System-IO.html#t:IO">IO</a> [(<a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#t:Maybe">Maybe</a> a, <a href="Test-DejaFu-SCT.html#t:SCTTrace">SCTTrace</a>)] <a href="src/Test-DejaFu-SCT-Bounding.html#sctPreBoundIO" class="link">Source</a></p><div class="doc"><p>Variant of <code><a href="Test-DejaFu-SCT.html#v:sctPreBound">sctPreBound</a></code> using <code><a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/System-IO.html#t:IO">IO</a></code>. See usual caveats about IO.</p></div></div><div class="top"><p class="src"><a name="v:sctDelayBound" class="def">sctDelayBound</a> ::  <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Int.html#t:Int">Int</a> -&gt; (<span class="keyword">forall</span> t. <a href="Test-DejaFu-Deterministic.html#t:Conc">Conc</a> t a) -&gt; [(<a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#t:Maybe">Maybe</a> a, <a href="Test-DejaFu-SCT.html#t:SCTTrace">SCTTrace</a>)] <a href="src/Test-DejaFu-SCT-Bounding.html#sctDelayBound" class="link">Source</a></p><div class="doc"><p>An SCT runner using a delay-bounding scheduler. Schedules are
 explored systematically, in a depth-first fashion.</p></div></div><div class="top"><p class="src"><a name="v:sctDelayBoundIO" class="def">sctDelayBoundIO</a> ::  <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Int.html#t:Int">Int</a> -&gt; (<span class="keyword">forall</span> t. <a href="Test-DejaFu-Deterministic-IO.html#t:Conc">Conc</a> t a) -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/System-IO.html#t:IO">IO</a> [(<a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#t:Maybe">Maybe</a> a, <a href="Test-DejaFu-SCT.html#t:SCTTrace">SCTTrace</a>)] <a href="src/Test-DejaFu-SCT-Bounding.html#sctDelayBoundIO" class="link">Source</a></p><div class="doc"><p>Variant of <code><a href="Test-DejaFu-SCT.html#v:sctDelayBound">sctDelayBound</a></code> using <code><a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/System-IO.html#t:IO">IO</a></code>. See usual caveats about
 IO.</p></div></div><h1 id="g:5">Utilities</h1><div class="top"><p class="src"><a name="v:makeSCT" class="def">makeSCT</a> ::  <a href="Test-DejaFu-Deterministic-Schedulers.html#t:Scheduler">Scheduler</a> s -&gt; <a href="Test-DejaFu-SCT.html#t:SCTScheduler">SCTScheduler</a> s <a href="src/Test-DejaFu-SCT-Internal.html#makeSCT" class="link">Source</a></p><div class="doc"><p>Convert a <code><a href="Test-DejaFu-Deterministic-Schedulers.html#t:Scheduler">Scheduler</a></code> to an <code><a href="Test-DejaFu-SCT.html#t:SCTScheduler">SCTScheduler</a></code> by recording the
 trace.</p></div></div><div class="top"><p class="src"><a name="v:preEmpCount" class="def">preEmpCount</a> :: [<a href="Test-DejaFu-SCT.html#t:Decision">Decision</a>] -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Int.html#t:Int">Int</a> <a href="src/Test-DejaFu-SCT-Bounding.html#preEmpCount" class="link">Source</a></p><div class="doc"><p>Check the pre-emption count of some scheduling decisions.</p></div></div><div class="top"><p class="src"><a name="v:showTrace" class="def">showTrace</a> :: <a href="Test-DejaFu-SCT.html#t:SchedTrace">SchedTrace</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-String.html#t:String">String</a> <a href="src/Test-DejaFu-SCT-Internal.html#showTrace" class="link">Source</a></p><div class="doc"><p>Pretty-print a scheduler trace.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.14.3</p></div></body></html>