<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Test.DejaFu.Shrink</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Test-DejaFu-Shrink.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Test-DejaFu-Shrink.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">dejafu-0.0.0.0: Overloadable primitives for testable, potentially non-deterministic, concurrency.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Test.DejaFu.Shrink</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Utilities</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Functions for attempting to find maximally simple traces
 producing a given result.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:shrink">shrink</a> :: <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Eq.html#t:Eq">Eq</a> a =&gt; (<a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#t:Maybe">Maybe</a> a, <a href="Test-DejaFu-Deterministic.html#t:Trace">Trace</a>) -&gt; (<span class="keyword">forall</span> t. <a href="Test-DejaFu-Deterministic.html#t:Conc">Conc</a> t a) -&gt; <a href="Test-DejaFu-Deterministic.html#t:Trace">Trace</a></li><li class="src short"><a href="#v:shrinkIO">shrinkIO</a> :: <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Eq.html#t:Eq">Eq</a> a =&gt; (<a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#t:Maybe">Maybe</a> a, <a href="Test-DejaFu-Deterministic.html#t:Trace">Trace</a>) -&gt; (<span class="keyword">forall</span> t. <a href="Test-DejaFu-Deterministic-IO.html#t:ConcIO">ConcIO</a> t a) -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/System-IO.html#t:IO">IO</a> <a href="Test-DejaFu-Deterministic.html#t:Trace">Trace</a></li><li class="src short"><a href="#v:candidates">candidates</a> :: <a href="Test-DejaFu-Deterministic.html#t:Trace">Trace</a> -&gt; [([<a href="Test-DejaFu-Deterministic.html#t:Decision">Decision</a>], <a href="Test-DejaFu-Deterministic-Schedule.html#t:ThreadId">ThreadId</a>)]</li><li class="src short"><a href="#v:try">try</a> ::  (<a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#t:Maybe">Maybe</a> a -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Bool.html#t:Bool">Bool</a>) -&gt; [<a href="Test-DejaFu-Deterministic.html#t:Decision">Decision</a>] -&gt; (<span class="keyword">forall</span> t. <a href="Test-DejaFu-Deterministic.html#t:Conc">Conc</a> t a) -&gt; [<a href="Test-DejaFu-Deterministic.html#t:Trace">Trace</a>]</li><li class="src short"><a href="#v:tryIO">tryIO</a> ::  (<a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#t:Maybe">Maybe</a> a -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Bool.html#t:Bool">Bool</a>) -&gt; [<a href="Test-DejaFu-Deterministic.html#t:Decision">Decision</a>] -&gt; (<span class="keyword">forall</span> t. <a href="Test-DejaFu-Deterministic-IO.html#t:ConcIO">ConcIO</a> t a) -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/System-IO.html#t:IO">IO</a> [<a href="Test-DejaFu-Deterministic.html#t:Trace">Trace</a>]</li><li class="src short"><a href="#v:essential">essential</a> :: ([<a href="Test-DejaFu-Deterministic.html#t:Decision">Decision</a>], <a href="Test-DejaFu-Deterministic-Schedule.html#t:ThreadId">ThreadId</a>) -&gt; [<a href="Test-DejaFu-Deterministic.html#t:Trace">Trace</a>] -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:simplest">simplest</a> :: [<a href="Test-DejaFu-Deterministic.html#t:Trace">Trace</a>] -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Test-DejaFu-Deterministic.html#t:Trace">Trace</a></li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a name="v:shrink" class="def">shrink</a> :: <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Eq.html#t:Eq">Eq</a> a =&gt; (<a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#t:Maybe">Maybe</a> a, <a href="Test-DejaFu-Deterministic.html#t:Trace">Trace</a>) -&gt; (<span class="keyword">forall</span> t. <a href="Test-DejaFu-Deterministic.html#t:Conc">Conc</a> t a) -&gt; <a href="Test-DejaFu-Deterministic.html#t:Trace">Trace</a> <a href="src/Test-DejaFu-Shrink.html#shrink" class="link">Source</a></p><div class="doc"><p>Attempt to find a trace with a minimal number of pre-emptions
 that gives rise to the desired output.</p></div></div><div class="top"><p class="src"><a name="v:shrinkIO" class="def">shrinkIO</a> :: <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Eq.html#t:Eq">Eq</a> a =&gt; (<a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#t:Maybe">Maybe</a> a, <a href="Test-DejaFu-Deterministic.html#t:Trace">Trace</a>) -&gt; (<span class="keyword">forall</span> t. <a href="Test-DejaFu-Deterministic-IO.html#t:ConcIO">ConcIO</a> t a) -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/System-IO.html#t:IO">IO</a> <a href="Test-DejaFu-Deterministic.html#t:Trace">Trace</a> <a href="src/Test-DejaFu-Shrink.html#shrinkIO" class="link">Source</a></p><div class="doc"><p>Variant of <code><a href="Test-DejaFu-Shrink.html#v:shrink">shrink</a></code> for computations which do <code><a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/System-IO.html#t:IO">IO</a></code>.</p></div></div><h1 id="g:1">Utilities</h1><div class="doc"><p>If you wanted to implement your own shrinking logic, these are
 the building blocks.</p></div><div class="top"><p class="src"><a name="v:candidates" class="def">candidates</a> :: <a href="Test-DejaFu-Deterministic.html#t:Trace">Trace</a> -&gt; [([<a href="Test-DejaFu-Deterministic.html#t:Decision">Decision</a>], <a href="Test-DejaFu-Deterministic-Schedule.html#t:ThreadId">ThreadId</a>)] <a href="src/Test-DejaFu-Shrink.html#candidates" class="link">Source</a></p><div class="doc"><p>Generate all candidate trace prefixes from a trace. These are
 produced by attempting to drop one pre-emption. Furthermore, the
 <code><a href="Test-DejaFu-Deterministic-Schedule.html#t:ThreadId">ThreadId</a></code> of the thread which performed the dropped pre-emption is
 also returned.</p></div></div><div class="top"><p class="src"><a name="v:try" class="def">try</a> ::  (<a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#t:Maybe">Maybe</a> a -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Bool.html#t:Bool">Bool</a>) -&gt; [<a href="Test-DejaFu-Deterministic.html#t:Decision">Decision</a>] -&gt; (<span class="keyword">forall</span> t. <a href="Test-DejaFu-Deterministic.html#t:Conc">Conc</a> t a) -&gt; [<a href="Test-DejaFu-Deterministic.html#t:Trace">Trace</a>] <a href="src/Test-DejaFu-Shrink.html#try" class="link">Source</a></p><div class="doc"><p>Try all traces with a given trace prefix, which introduce no more
 than one new pre-emption, and return those which satisfy the
 predicate.</p></div></div><div class="top"><p class="src"><a name="v:tryIO" class="def">tryIO</a> ::  (<a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#t:Maybe">Maybe</a> a -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Bool.html#t:Bool">Bool</a>) -&gt; [<a href="Test-DejaFu-Deterministic.html#t:Decision">Decision</a>] -&gt; (<span class="keyword">forall</span> t. <a href="Test-DejaFu-Deterministic-IO.html#t:ConcIO">ConcIO</a> t a) -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/System-IO.html#t:IO">IO</a> [<a href="Test-DejaFu-Deterministic.html#t:Trace">Trace</a>] <a href="src/Test-DejaFu-Shrink.html#tryIO" class="link">Source</a></p><div class="doc"><p>Variant of <code><a href="Test-DejaFu-Shrink.html#v:try">try</a></code> for computations which do <code><a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/System-IO.html#t:IO">IO</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:essential" class="def">essential</a> :: ([<a href="Test-DejaFu-Deterministic.html#t:Decision">Decision</a>], <a href="Test-DejaFu-Deterministic-Schedule.html#t:ThreadId">ThreadId</a>) -&gt; [<a href="Test-DejaFu-Deterministic.html#t:Trace">Trace</a>] -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Bool.html#t:Bool">Bool</a> <a href="src/Test-DejaFu-Shrink.html#essential" class="link">Source</a></p><div class="doc"><p>Given a list of <code><a href="Test-DejaFu-Deterministic.html#t:Trace">Trace</a></code>s which follow on from a given prefix,
 determine if the removed pre-emption is <em>essential</em>. That is, every
 <code><a href="Test-DejaFu-Deterministic.html#t:Trace">Trace</a></code> starts with the prefix followed immediately by a
 pre-emption to the given thread.</p></div></div><div class="top"><p class="src"><a name="v:simplest" class="def">simplest</a> :: [<a href="Test-DejaFu-Deterministic.html#t:Trace">Trace</a>] -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Test-DejaFu-Deterministic.html#t:Trace">Trace</a> <a href="src/Test-DejaFu-Shrink.html#simplest" class="link">Source</a></p><div class="doc"><p>Return the simplest <code><a href="Test-DejaFu-Deterministic.html#t:Trace">Trace</a></code> from a collection. Roughly, the
 one with the fewest pre-emptions. If the list is empty, return
 <code><a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#v:Nothing">Nothing</a></code>.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.14.3</p></div></body></html>