<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Test.DejaFu.SCT.Internal</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Test-DejaFu-SCT-Internal.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Test-DejaFu-SCT-Internal.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">dejafu-0.2.0.0: Overloadable primitives for testable, potentially non-deterministic, concurrency.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Test.DejaFu.SCT.Internal</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">BPOR state</a></li><li><a href="#g:2">Utilities</a></li><li><a href="#g:3">Keeping track of <code>CVar</code> full/empty states</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Internal utilities and types for BPOR.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:BacktrackStep">BacktrackStep</a> = <a href="#v:BacktrackStep">BacktrackStep</a> {<ul class="subs"><li><a href="#v:_threadid">_threadid</a> :: <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a></li><li><a href="#v:_decision">_decision</a> :: (<a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Decision">Decision</a>, <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadAction">ThreadAction</a>)</li><li><a href="#v:_runnable">_runnable</a> :: <a href="https://hackage.haskell.org/package/containers-0.5.6.2/docs/Data-Set.html#t:Set">Set</a> <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a></li><li><a href="#v:_backtrack">_backtrack</a> :: <a href="https://hackage.haskell.org/package/containers-0.5.6.2/docs/Data-IntMap-Strict.html#t:IntMap">IntMap</a> <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:BPOR">BPOR</a> = <a href="#v:BPOR">BPOR</a> {<ul class="subs"><li><a href="#v:_brunnable">_brunnable</a> :: <a href="https://hackage.haskell.org/package/containers-0.5.6.2/docs/Data-Set.html#t:Set">Set</a> <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a></li><li><a href="#v:_btodo">_btodo</a> :: <a href="https://hackage.haskell.org/package/containers-0.5.6.2/docs/Data-IntMap-Strict.html#t:IntMap">IntMap</a> <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a></li><li><a href="#v:_bignore">_bignore</a> :: <a href="https://hackage.haskell.org/package/containers-0.5.6.2/docs/Data-Set.html#t:Set">Set</a> <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a></li><li><a href="#v:_bdone">_bdone</a> :: <a href="https://hackage.haskell.org/package/containers-0.5.6.2/docs/Data-IntMap-Strict.html#t:IntMap">IntMap</a> <a href="Test-DejaFu-SCT-Internal.html#t:BPOR">BPOR</a></li><li><a href="#v:_bsleep">_bsleep</a> :: <a href="https://hackage.haskell.org/package/containers-0.5.6.2/docs/Data-IntMap-Strict.html#t:IntMap">IntMap</a> <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadAction">ThreadAction</a></li><li><a href="#v:_btaken">_btaken</a> :: <a href="https://hackage.haskell.org/package/containers-0.5.6.2/docs/Data-IntMap-Strict.html#t:IntMap">IntMap</a> <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadAction">ThreadAction</a></li></ul>}</li><li class="src short"><a href="#v:initialState">initialState</a> :: <a href="Test-DejaFu-SCT-Internal.html#t:BPOR">BPOR</a></li><li class="src short"><a href="#v:next">next</a> :: <a href="Test-DejaFu-SCT-Internal.html#t:BPOR">BPOR</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> ([<a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a>], <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a>, <a href="Test-DejaFu-SCT-Internal.html#t:BPOR">BPOR</a>)</li><li class="src short"><a href="#v:findBacktrack">findBacktrack</a> :: <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:MemType">MemType</a> -&gt; ([<a href="Test-DejaFu-SCT-Internal.html#t:BacktrackStep">BacktrackStep</a>] -&gt; <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Int.html#t:Int">Int</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; [<a href="Test-DejaFu-SCT-Internal.html#t:BacktrackStep">BacktrackStep</a>]) -&gt; <a href="https://hackage.haskell.org/package/containers-0.5.6.2/docs/Data-Sequence.html#t:Seq">Seq</a> (<a href="Data-List-Extra.html#t:NonEmpty">NonEmpty</a> (<a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a>, <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Lookahead">Lookahead</a>), [<a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a>]) -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Trace-39-">Trace'</a> -&gt; [<a href="Test-DejaFu-SCT-Internal.html#t:BacktrackStep">BacktrackStep</a>]</li><li class="src short"><a href="#v:grow">grow</a> :: <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:MemType">MemType</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Trace-39-">Trace'</a> -&gt; <a href="Test-DejaFu-SCT-Internal.html#t:BPOR">BPOR</a> -&gt; <a href="Test-DejaFu-SCT-Internal.html#t:BPOR">BPOR</a></li><li class="src short"><a href="#v:todo">todo</a> :: ([<a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Decision">Decision</a>] -&gt; <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a>) -&gt; [<a href="Test-DejaFu-SCT-Internal.html#t:BacktrackStep">BacktrackStep</a>] -&gt; <a href="Test-DejaFu-SCT-Internal.html#t:BPOR">BPOR</a> -&gt; <a href="Test-DejaFu-SCT-Internal.html#t:BPOR">BPOR</a></li><li class="src short"><a href="#v:tidOf">tidOf</a> :: <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Decision">Decision</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a></li><li class="src short"><a href="#v:decisionOf">decisionOf</a> :: <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; <a href="https://hackage.haskell.org/package/containers-0.5.6.2/docs/Data-Set.html#t:Set">Set</a> <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Decision">Decision</a></li><li class="src short"><a href="#v:activeTid">activeTid</a> :: [<a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Decision">Decision</a>] -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a></li><li class="src short"><a href="#v:preEmpCount">preEmpCount</a> :: [<a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Decision">Decision</a>] -&gt; <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Int.html#t:Int">Int</a></li><li class="src short"><a href="#v:dependent">dependent</a> :: <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:MemType">MemType</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadAction">ThreadAction</a> -&gt; (<a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a>, <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadAction">ThreadAction</a>) -&gt; <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:dependent-39-">dependent'</a> :: <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:MemType">MemType</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadAction">ThreadAction</a> -&gt; (<a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a>, <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Lookahead">Lookahead</a>) -&gt; <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:dependentActions">dependentActions</a> :: <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:MemType">MemType</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ActionType">ActionType</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ActionType">ActionType</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:initialCVState">initialCVState</a> :: <a href="https://hackage.haskell.org/package/containers-0.5.6.2/docs/Data-IntMap-Strict.html#t:IntMap">IntMap</a> <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:updateCVState">updateCVState</a> :: <a href="https://hackage.haskell.org/package/containers-0.5.6.2/docs/Data-IntMap-Strict.html#t:IntMap">IntMap</a> <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadAction">ThreadAction</a> -&gt; <a href="https://hackage.haskell.org/package/containers-0.5.6.2/docs/Data-IntMap-Strict.html#t:IntMap">IntMap</a> <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:willBlock">willBlock</a> :: <a href="https://hackage.haskell.org/package/containers-0.5.6.2/docs/Data-IntMap-Strict.html#t:IntMap">IntMap</a> <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Lookahead">Lookahead</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:willBlockSafely">willBlockSafely</a> :: <a href="https://hackage.haskell.org/package/containers-0.5.6.2/docs/Data-IntMap-Strict.html#t:IntMap">IntMap</a> <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a> -&gt; [<a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Lookahead">Lookahead</a>] -&gt; <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a></li></ul></div><div id="interface"><h1 id="g:1">BPOR state</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:BacktrackStep" class="def">BacktrackStep</a> <a href="src/Test-DejaFu-SCT-Internal.html#BacktrackStep" class="link">Source</a></p><div class="doc"><p>One step of the execution, including information for backtracking
 purposes. This backtracking information is used to generate new
 schedules.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:BacktrackStep" class="def">BacktrackStep</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:_threadid" class="def">_threadid</a> :: <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a></dt><dd class="doc"><p>The thread running at this step</p></dd><dt class="src"><a name="v:_decision" class="def">_decision</a> :: (<a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Decision">Decision</a>, <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadAction">ThreadAction</a>)</dt><dd class="doc"><p>What happened at this step.</p></dd><dt class="src"><a name="v:_runnable" class="def">_runnable</a> :: <a href="https://hackage.haskell.org/package/containers-0.5.6.2/docs/Data-Set.html#t:Set">Set</a> <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a></dt><dd class="doc"><p>The threads runnable at this step</p></dd><dt class="src"><a name="v:_backtrack" class="def">_backtrack</a> :: <a href="https://hackage.haskell.org/package/containers-0.5.6.2/docs/Data-IntMap-Strict.html#t:IntMap">IntMap</a> <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a></dt><dd class="doc"><p>The list of alternative threads to run, and whether those
 alternatives were added conservatively due to the bound.</p></dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:BacktrackStep" class="caption collapser" onclick="toggleSection('i:BacktrackStep')">Instances</p><div id="section.i:BacktrackStep" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Eq.html#t:Eq">Eq</a> <a href="Test-DejaFu-SCT-Internal.html#t:BacktrackStep">BacktrackStep</a></span> <a href="src/Test-DejaFu-SCT-Internal.html#line-39" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Text-Show.html#t:Show">Show</a> <a href="Test-DejaFu-SCT-Internal.html#t:BacktrackStep">BacktrackStep</a></span> <a href="src/Test-DejaFu-SCT-Internal.html#line-39" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="https://hackage.haskell.org/package/deepseq-1.4.1.1/docs/Control-DeepSeq.html#t:NFData">NFData</a> <a href="Test-DejaFu-SCT-Internal.html#t:BacktrackStep">BacktrackStep</a></span> <a href="src/Test-DejaFu-SCT-Internal.html#line-41" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:BPOR" class="def">BPOR</a> <a href="src/Test-DejaFu-SCT-Internal.html#BPOR" class="link">Source</a></p><div class="doc"><p>BPOR execution is represented as a tree of states, characterised
 by the decisions that lead to that state.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:BPOR" class="def">BPOR</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:_brunnable" class="def">_brunnable</a> :: <a href="https://hackage.haskell.org/package/containers-0.5.6.2/docs/Data-Set.html#t:Set">Set</a> <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a></dt><dd class="doc"><p>What threads are runnable at this step.</p></dd><dt class="src"><a name="v:_btodo" class="def">_btodo</a> :: <a href="https://hackage.haskell.org/package/containers-0.5.6.2/docs/Data-IntMap-Strict.html#t:IntMap">IntMap</a> <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a></dt><dd class="doc"><p>Follow-on decisions still to make, and whether that decision
 was added conservatively due to the bound.</p></dd><dt class="src"><a name="v:_bignore" class="def">_bignore</a> :: <a href="https://hackage.haskell.org/package/containers-0.5.6.2/docs/Data-Set.html#t:Set">Set</a> <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a></dt><dd class="doc"><p>Follow-on decisions never to make, because they will result in
 the chosen thread immediately blocking without achieving
 anything, which can't have any effect on the result of the
 program.</p></dd><dt class="src"><a name="v:_bdone" class="def">_bdone</a> :: <a href="https://hackage.haskell.org/package/containers-0.5.6.2/docs/Data-IntMap-Strict.html#t:IntMap">IntMap</a> <a href="Test-DejaFu-SCT-Internal.html#t:BPOR">BPOR</a></dt><dd class="doc"><p>Follow-on decisions that have been made.</p></dd><dt class="src"><a name="v:_bsleep" class="def">_bsleep</a> :: <a href="https://hackage.haskell.org/package/containers-0.5.6.2/docs/Data-IntMap-Strict.html#t:IntMap">IntMap</a> <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadAction">ThreadAction</a></dt><dd class="doc"><p>Transitions to ignore (in this node and children) until a
 dependent transition happens.</p></dd><dt class="src"><a name="v:_btaken" class="def">_btaken</a> :: <a href="https://hackage.haskell.org/package/containers-0.5.6.2/docs/Data-IntMap-Strict.html#t:IntMap">IntMap</a> <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadAction">ThreadAction</a></dt><dd class="doc"><p>Transitions which have been taken, excluding
 conservatively-added ones, in the (reverse) order that they were
 taken, as the <code>Map</code> doesn't preserve insertion order. This is
 used in implementing sleep sets.</p></dd></dl><div class="clear"></div></div></td></tr></table></div></div><div class="top"><p class="src"><a name="v:initialState" class="def">initialState</a> :: <a href="Test-DejaFu-SCT-Internal.html#t:BPOR">BPOR</a> <a href="src/Test-DejaFu-SCT-Internal.html#initialState" class="link">Source</a></p><div class="doc"><p>Initial BPOR state.</p></div></div><div class="top"><p class="src"><a name="v:next" class="def">next</a> :: <a href="Test-DejaFu-SCT-Internal.html#t:BPOR">BPOR</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> ([<a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a>], <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a>, <a href="Test-DejaFu-SCT-Internal.html#t:BPOR">BPOR</a>) <a href="src/Test-DejaFu-SCT-Internal.html#next" class="link">Source</a></p><div class="doc"><p>Produce a new schedule from a BPOR tree. If there are no new
 schedules remaining, return <code><a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Maybe.html#v:Nothing">Nothing</a></code>. Also returns whether the
 decision made was added conservatively.</p><p>This returns the longest prefix, on the assumption that this will
 lead to lots of backtracking points being identified before
 higher-up decisions are reconsidered, so enlarging the sleep sets.</p></div></div><div class="top"><p class="src"><a name="v:findBacktrack" class="def">findBacktrack</a> :: <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:MemType">MemType</a> -&gt; ([<a href="Test-DejaFu-SCT-Internal.html#t:BacktrackStep">BacktrackStep</a>] -&gt; <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Int.html#t:Int">Int</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; [<a href="Test-DejaFu-SCT-Internal.html#t:BacktrackStep">BacktrackStep</a>]) -&gt; <a href="https://hackage.haskell.org/package/containers-0.5.6.2/docs/Data-Sequence.html#t:Seq">Seq</a> (<a href="Data-List-Extra.html#t:NonEmpty">NonEmpty</a> (<a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a>, <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Lookahead">Lookahead</a>), [<a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a>]) -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Trace-39-">Trace'</a> -&gt; [<a href="Test-DejaFu-SCT-Internal.html#t:BacktrackStep">BacktrackStep</a>] <a href="src/Test-DejaFu-SCT-Internal.html#findBacktrack" class="link">Source</a></p><div class="doc"><p>Produce a list of new backtracking points from an execution
 trace.</p></div></div><div class="top"><p class="src"><a name="v:grow" class="def">grow</a> :: <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:MemType">MemType</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Trace-39-">Trace'</a> -&gt; <a href="Test-DejaFu-SCT-Internal.html#t:BPOR">BPOR</a> -&gt; <a href="Test-DejaFu-SCT-Internal.html#t:BPOR">BPOR</a> <a href="src/Test-DejaFu-SCT-Internal.html#grow" class="link">Source</a></p><div class="doc"><p>Add a new trace to the tree, creating a new subtree.</p></div></div><div class="top"><p class="src"><a name="v:todo" class="def">todo</a> :: ([<a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Decision">Decision</a>] -&gt; <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a>) -&gt; [<a href="Test-DejaFu-SCT-Internal.html#t:BacktrackStep">BacktrackStep</a>] -&gt; <a href="Test-DejaFu-SCT-Internal.html#t:BPOR">BPOR</a> -&gt; <a href="Test-DejaFu-SCT-Internal.html#t:BPOR">BPOR</a> <a href="src/Test-DejaFu-SCT-Internal.html#todo" class="link">Source</a></p><div class="doc"><p>Add new backtracking points, if they have not already been
 visited, fit into the bound, and aren't in the sleep set.</p></div></div><h1 id="g:2">Utilities</h1><div class="top"><p class="src"><a name="v:tidOf" class="def">tidOf</a> :: <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Decision">Decision</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> <a href="src/Test-DejaFu-SCT-Internal.html#tidOf" class="link">Source</a></p><div class="doc"><p>Get the resultant <code><a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a></code> of a <code><a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Decision">Decision</a></code>, with a default case
 for <code><a href="Test-DejaFu-Deterministic-Internal-Common.html#v:Continue">Continue</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:decisionOf" class="def">decisionOf</a> :: <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; <a href="https://hackage.haskell.org/package/containers-0.5.6.2/docs/Data-Set.html#t:Set">Set</a> <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Decision">Decision</a> <a href="src/Test-DejaFu-SCT-Internal.html#decisionOf" class="link">Source</a></p><div class="doc"><p>Get the <code><a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Decision">Decision</a></code> that would have resulted in this <code><a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a></code>,
 given a prior <code><a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a></code> (if any) and list of runnable threads.</p></div></div><div class="top"><p class="src"><a name="v:activeTid" class="def">activeTid</a> :: [<a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Decision">Decision</a>] -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> <a href="src/Test-DejaFu-SCT-Internal.html#activeTid" class="link">Source</a></p><div class="doc"><p>Get the tid of the currently active thread after executing a
 series of decisions. The list MUST begin with a <code><a href="Test-DejaFu-Deterministic-Internal-Common.html#v:Start">Start</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:preEmpCount" class="def">preEmpCount</a> :: [<a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Decision">Decision</a>] -&gt; <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Int.html#t:Int">Int</a> <a href="src/Test-DejaFu-SCT-Internal.html#preEmpCount" class="link">Source</a></p><div class="doc"><p>Count the number of pre-emptions in a schedule</p></div></div><div class="top"><p class="src"><a name="v:dependent" class="def">dependent</a> :: <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:MemType">MemType</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadAction">ThreadAction</a> -&gt; (<a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a>, <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadAction">ThreadAction</a>) -&gt; <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a> <a href="src/Test-DejaFu-SCT-Internal.html#dependent" class="link">Source</a></p><div class="doc"><p>Check if an action is dependent on another.</p></div></div><div class="top"><p class="src"><a name="v:dependent-39-" class="def">dependent'</a> :: <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:MemType">MemType</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadAction">ThreadAction</a> -&gt; (<a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a>, <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Lookahead">Lookahead</a>) -&gt; <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a> <a href="src/Test-DejaFu-SCT-Internal.html#dependent%27" class="link">Source</a></p><div class="doc"><p>Variant of <code><a href="Test-DejaFu-SCT-Internal.html#v:dependent">dependent</a></code> to handle <code>ThreadAction'</code>s</p></div></div><div class="top"><p class="src"><a name="v:dependentActions" class="def">dependentActions</a> :: <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:MemType">MemType</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ActionType">ActionType</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ActionType">ActionType</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a> <a href="src/Test-DejaFu-SCT-Internal.html#dependentActions" class="link">Source</a></p><div class="doc"><p>Check if two <code><a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ActionType">ActionType</a></code>s are dependent. Note that this is not
 sufficient to know if two <code><a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadAction">ThreadAction</a></code>s are dependent, without
 being so great an over-approximation as to be useless!</p></div></div><h1 id="g:3">Keeping track of <code>CVar</code> full/empty states</h1><div class="top"><p class="src"><a name="v:initialCVState" class="def">initialCVState</a> :: <a href="https://hackage.haskell.org/package/containers-0.5.6.2/docs/Data-IntMap-Strict.html#t:IntMap">IntMap</a> <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a> <a href="src/Test-DejaFu-SCT-Internal.html#initialCVState" class="link">Source</a></p><div class="doc"><p>Initial global <code>CVar</code> state</p></div></div><div class="top"><p class="src"><a name="v:updateCVState" class="def">updateCVState</a> :: <a href="https://hackage.haskell.org/package/containers-0.5.6.2/docs/Data-IntMap-Strict.html#t:IntMap">IntMap</a> <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadAction">ThreadAction</a> -&gt; <a href="https://hackage.haskell.org/package/containers-0.5.6.2/docs/Data-IntMap-Strict.html#t:IntMap">IntMap</a> <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a> <a href="src/Test-DejaFu-SCT-Internal.html#updateCVState" class="link">Source</a></p><div class="doc"><p>Update the <code>CVar</code> state with the action that has just happened.</p></div></div><div class="top"><p class="src"><a name="v:willBlock" class="def">willBlock</a> :: <a href="https://hackage.haskell.org/package/containers-0.5.6.2/docs/Data-IntMap-Strict.html#t:IntMap">IntMap</a> <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Lookahead">Lookahead</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a> <a href="src/Test-DejaFu-SCT-Internal.html#willBlock" class="link">Source</a></p><div class="doc"><p>Check if an action will block.</p></div></div><div class="top"><p class="src"><a name="v:willBlockSafely" class="def">willBlockSafely</a> :: <a href="https://hackage.haskell.org/package/containers-0.5.6.2/docs/Data-IntMap-Strict.html#t:IntMap">IntMap</a> <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a> -&gt; [<a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Lookahead">Lookahead</a>] -&gt; <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a> <a href="src/Test-DejaFu-SCT-Internal.html#willBlockSafely" class="link">Source</a></p><div class="doc"><p>Check if a list of actions will block safely (without modifying
 any global state). This allows further lookahead at, say, the
 <code>spawn</code> of a thread (which always starts with <code><a href="Test-DejaFu-Deterministic-Internal-Common.html#v:KnowsAbout">KnowsAbout</a></code>).</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>