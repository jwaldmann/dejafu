<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Control.Monad.Conc.SCT.Tests</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Control-Monad-Conc-SCT-Tests.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Control-Monad-Conc-SCT-Tests.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">monad-conc-0.0.0.0: Overloadable primitives for potentially non-deterministic concurrency.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Control.Monad.Conc.SCT.Tests</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Test cases</a></li><li><a href="#g:2">Predicates</a></li><li><a href="#g:3">Utilities</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Useful functions for writing SCT test cases for <code>Conc</code>
 computations.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:Result">Result</a> = <a href="#v:Result">Result</a> {<ul class="subs"><li><a href="#v:_pass">_pass</a> :: <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Bool.html#t:Bool">Bool</a></li><li><a href="#v:_casesChecked">_casesChecked</a> :: <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Int.html#t:Int">Int</a></li><li><a href="#v:_casesTotal">_casesTotal</a> :: <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Int.html#t:Int">Int</a></li></ul>}</li><li class="src short"><a href="#v:runTest">runTest</a> ::  <a href="Control-Monad-Conc-SCT-Tests.html#t:Predicate">Predicate</a> a -&gt; (<span class="keyword">forall</span> t. <a href="Control-Monad-Conc-Fixed-ST.html#t:Conc">Conc</a> t a) -&gt; <a href="Control-Monad-Conc-SCT-Tests.html#t:Result">Result</a></li><li class="src short"><a href="#v:runTestIO">runTestIO</a> ::  <a href="Control-Monad-Conc-SCT-Tests.html#t:Predicate">Predicate</a> a -&gt; (<span class="keyword">forall</span> t. <a href="Control-Monad-Conc-Fixed-IO.html#t:Conc">Conc</a> t a) -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/System-IO.html#t:IO">IO</a> <a href="Control-Monad-Conc-SCT-Tests.html#t:Result">Result</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:Predicate">Predicate</a> a = [<a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#t:Maybe">Maybe</a> a] -&gt; <a href="Control-Monad-Conc-SCT-Tests.html#t:Result">Result</a></li><li class="src short"><a href="#v:deadlocksNever">deadlocksNever</a> ::  <a href="Control-Monad-Conc-SCT-Tests.html#t:Predicate">Predicate</a> a</li><li class="src short"><a href="#v:deadlocksAlways">deadlocksAlways</a> ::  <a href="Control-Monad-Conc-SCT-Tests.html#t:Predicate">Predicate</a> a</li><li class="src short"><a href="#v:alwaysSame">alwaysSame</a> :: <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Eq.html#t:Eq">Eq</a> a =&gt; <a href="Control-Monad-Conc-SCT-Tests.html#t:Predicate">Predicate</a> a</li><li class="src short"><a href="#v:pAnd">pAnd</a> ::  <a href="Control-Monad-Conc-SCT-Tests.html#t:Predicate">Predicate</a> a -&gt; <a href="Control-Monad-Conc-SCT-Tests.html#t:Predicate">Predicate</a> a -&gt; <a href="Control-Monad-Conc-SCT-Tests.html#t:Predicate">Predicate</a> a</li><li class="src short"><a href="#v:pNot">pNot</a> ::  <a href="Control-Monad-Conc-SCT-Tests.html#t:Predicate">Predicate</a> a -&gt; <a href="Control-Monad-Conc-SCT-Tests.html#t:Predicate">Predicate</a> a</li><li class="src short"><a href="#v:toPredicate">toPredicate</a> ::  (<a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#t:Maybe">Maybe</a> a -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Bool.html#t:Bool">Bool</a>) -&gt; [<a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#t:Maybe">Maybe</a> a] -&gt; <a href="Control-Monad-Conc-SCT-Tests.html#t:Result">Result</a></li><li class="src short"><a href="#v:takeWhile-39-">takeWhile'</a> ::  (a -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Bool.html#t:Bool">Bool</a>) -&gt; [a] -&gt; ([a], <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Bool.html#t:Bool">Bool</a>, <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Int.html#t:Int">Int</a>)</li></ul></div><div id="interface"><h1 id="g:1">Test cases</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Result" class="def">Result</a> <a href="src/Control-Monad-Conc-SCT-Tests.html#Result" class="link">Source</a></p><div class="doc"><p>The results of a test, including information on the number of
 cases checked, and number of total cases. Be careful if using the
 total number of cases, as that value may be very big, and (due to
 laziness) will actually force a lot more computation!.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Result" class="def">Result</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:_pass" class="def">_pass</a> :: <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Bool.html#t:Bool">Bool</a></dt><dd class="doc"><p>Whether the test passed or not.</p></dd><dt class="src"><a name="v:_casesChecked" class="def">_casesChecked</a> :: <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Int.html#t:Int">Int</a></dt><dd class="doc"><p>The number of cases checked.</p></dd><dt class="src"><a name="v:_casesTotal" class="def">_casesTotal</a> :: <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Int.html#t:Int">Int</a></dt><dd class="doc"><p>The total number of cases.</p></dd></dl><div class="clear"></div></div></td></tr></table></div></div><div class="top"><p class="src"><a name="v:runTest" class="def">runTest</a> ::  <a href="Control-Monad-Conc-SCT-Tests.html#t:Predicate">Predicate</a> a -&gt; (<span class="keyword">forall</span> t. <a href="Control-Monad-Conc-Fixed-ST.html#t:Conc">Conc</a> t a) -&gt; <a href="Control-Monad-Conc-SCT-Tests.html#t:Result">Result</a> <a href="src/Control-Monad-Conc-SCT-Tests.html#runTest" class="link">Source</a></p><div class="doc"><p>Run a test using the pre-emption bounding scheduler, with a bound
 of 2.</p></div></div><div class="top"><p class="src"><a name="v:runTestIO" class="def">runTestIO</a> ::  <a href="Control-Monad-Conc-SCT-Tests.html#t:Predicate">Predicate</a> a -&gt; (<span class="keyword">forall</span> t. <a href="Control-Monad-Conc-Fixed-IO.html#t:Conc">Conc</a> t a) -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/System-IO.html#t:IO">IO</a> <a href="Control-Monad-Conc-SCT-Tests.html#t:Result">Result</a> <a href="src/Control-Monad-Conc-SCT-Tests.html#runTestIO" class="link">Source</a></p><div class="doc"><p>Variant of <code><a href="Control-Monad-Conc-SCT-Tests.html#v:runTest">runTest</a></code> using <code><a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/System-IO.html#t:IO">IO</a></code>. See usual caveats about <code><a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/System-IO.html#t:IO">IO</a></code>.</p></div></div><h1 id="g:2">Predicates</h1><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Predicate" class="def">Predicate</a> a = [<a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#t:Maybe">Maybe</a> a] -&gt; <a href="Control-Monad-Conc-SCT-Tests.html#t:Result">Result</a> <a href="src/Control-Monad-Conc-SCT-Tests.html#Predicate" class="link">Source</a></p><div class="doc"><p>A <code>Predicate</code> is a function which collapses a list of results
 into a <code><a href="Control-Monad-Conc-SCT-Tests.html#t:Result">Result</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:deadlocksNever" class="def">deadlocksNever</a> ::  <a href="Control-Monad-Conc-SCT-Tests.html#t:Predicate">Predicate</a> a <a href="src/Control-Monad-Conc-SCT-Tests.html#deadlocksNever" class="link">Source</a></p><div class="doc"><p>Check that a computation never deadlocks.</p></div></div><div class="top"><p class="src"><a name="v:deadlocksAlways" class="def">deadlocksAlways</a> ::  <a href="Control-Monad-Conc-SCT-Tests.html#t:Predicate">Predicate</a> a <a href="src/Control-Monad-Conc-SCT-Tests.html#deadlocksAlways" class="link">Source</a></p><div class="doc"><p>Check that a computation always deadlocks.</p></div></div><div class="top"><p class="src"><a name="v:alwaysSame" class="def">alwaysSame</a> :: <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Eq.html#t:Eq">Eq</a> a =&gt; <a href="Control-Monad-Conc-SCT-Tests.html#t:Predicate">Predicate</a> a <a href="src/Control-Monad-Conc-SCT-Tests.html#alwaysSame" class="link">Source</a></p><div class="doc"><p>Check that the result of a computation is always the same. In
 particular this means either: (a) it always deadlocks, or (b) the
 result is always <code><a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#v:Just">Just</a></code> <code>x</code>, for some fixed <code>x</code>.</p></div></div><h1 id="g:3">Utilities</h1><div class="top"><p class="src"><a name="v:pAnd" class="def">pAnd</a> ::  <a href="Control-Monad-Conc-SCT-Tests.html#t:Predicate">Predicate</a> a -&gt; <a href="Control-Monad-Conc-SCT-Tests.html#t:Predicate">Predicate</a> a -&gt; <a href="Control-Monad-Conc-SCT-Tests.html#t:Predicate">Predicate</a> a <a href="src/Control-Monad-Conc-SCT-Tests.html#pAnd" class="link">Source</a></p><div class="doc"><p>Compose two predicates sequentially.</p></div></div><div class="top"><p class="src"><a name="v:pNot" class="def">pNot</a> ::  <a href="Control-Monad-Conc-SCT-Tests.html#t:Predicate">Predicate</a> a -&gt; <a href="Control-Monad-Conc-SCT-Tests.html#t:Predicate">Predicate</a> a <a href="src/Control-Monad-Conc-SCT-Tests.html#pNot" class="link">Source</a></p><div class="doc"><p>Invert the result of a predicate.</p></div></div><div class="top"><p class="src"><a name="v:toPredicate" class="def">toPredicate</a> ::  (<a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#t:Maybe">Maybe</a> a -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Bool.html#t:Bool">Bool</a>) -&gt; [<a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Maybe.html#t:Maybe">Maybe</a> a] -&gt; <a href="Control-Monad-Conc-SCT-Tests.html#t:Result">Result</a> <a href="src/Control-Monad-Conc-SCT-Tests.html#toPredicate" class="link">Source</a></p><div class="doc"><p>Convert a boolean function to a <code><a href="Control-Monad-Conc-SCT-Tests.html#t:Result">Result</a></code>-producing predicate.</p></div></div><div class="top"><p class="src"><a name="v:takeWhile-39-" class="def">takeWhile'</a> ::  (a -&gt; <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Bool.html#t:Bool">Bool</a>) -&gt; [a] -&gt; ([a], <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Bool.html#t:Bool">Bool</a>, <a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-Int.html#t:Int">Int</a>) <a href="src/Control-Monad-Conc-SCT-Tests.html#takeWhile%27" class="link">Source</a></p><div class="doc"><p>Variant of <code><a href="https://hackage.haskell.org/package/base-4.7.0.2/docs/Data-List.html#v:takeWhile">takeWhile</a></code> that also includes a count of results
 returned and whether it traversed the entire list.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.14.3</p></div></body></html>