<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Test.DejaFu.Deterministic.Internal.Threading</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Test-DejaFu-Deterministic-Internal-Threading.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Test-DejaFu-Deterministic-Internal-Threading.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">dejafu-0.2.0.0: Overloadable primitives for testable, potentially non-deterministic, concurrency.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Test.DejaFu.Deterministic.Internal.Threading</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Threads</a></li><li><a href="#g:2">Blocking</a></li><li><a href="#g:3">Exceptions</a></li><li><a href="#g:4">Manipulating threads</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Operations and types for threads.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">type</span> <a href="#t:Threads">Threads</a> n r s = <a href="https://hackage.haskell.org/package/containers-0.5.6.2/docs/Data-IntMap-Strict.html#t:IntMap">IntMap</a> (<a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Thread">Thread</a> n r s)</li><li class="src short"><span class="keyword">data</span> <a href="#t:Thread">Thread</a> n r s = <a href="#v:Thread">Thread</a> {<ul class="subs"><li><a href="#v:_continuation">_continuation</a> :: <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Action">Action</a> n r s</li><li><a href="#v:_blocking">_blocking</a> :: <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:BlockedOn">BlockedOn</a></li><li><a href="#v:_handlers">_handlers</a> :: [<a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Handler">Handler</a> n r s]</li><li><a href="#v:_masking">_masking</a> :: <a href="Test-DejaFu-Deterministic.html#t:MaskingState">MaskingState</a></li><li><a href="#v:_known">_known</a> :: [<a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Either.html#t:Either">Either</a> <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:CVarId">CVarId</a> <a href="Test-DejaFu-STM-Internal.html#t:CTVarId">CTVarId</a>]</li><li><a href="#v:_fullknown">_fullknown</a> :: <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a></li></ul>}</li><li class="src short"><a href="#v:mkthread">mkthread</a> :: <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Action">Action</a> n r s -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Thread">Thread</a> n r s</li><li class="src short"><span class="keyword">data</span> <a href="#t:BlockedOn">BlockedOn</a><ul class="subs"><li>= <a href="#v:OnCVarFull">OnCVarFull</a> <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:CVarId">CVarId</a></li><li>| <a href="#v:OnCVarEmpty">OnCVarEmpty</a> <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:CVarId">CVarId</a></li><li>| <a href="#v:OnCTVar">OnCTVar</a> [<a href="Test-DejaFu-STM-Internal.html#t:CTVarId">CTVarId</a>]</li><li>| <a href="#v:OnMask">OnMask</a> <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a></li></ul></li><li class="src short"><a href="#v:-126--61-">(~=)</a> :: <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Thread">Thread</a> n r s -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:BlockedOn">BlockedOn</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:isLocked">isLocked</a> :: <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r a -&gt; <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:Handler">Handler</a> n r s = <span class="keyword">forall</span> e . <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Control-Exception-Base.html#t:Exception">Exception</a> e =&gt; <a href="#v:Handler">Handler</a> (e -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Action">Action</a> n r s)</li><li class="src short"><a href="#v:propagate">propagate</a> :: <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Control-Exception-Base.html#t:SomeException">SomeException</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s -&gt; <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s)</li><li class="src short"><a href="#v:interruptible">interruptible</a> :: <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Thread">Thread</a> n r s -&gt; <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:catching">catching</a> :: <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Control-Exception-Base.html#t:Exception">Exception</a> e =&gt; (e -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Action">Action</a> n r s) -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s</li><li class="src short"><a href="#v:uncatching">uncatching</a> :: <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s</li><li class="src short"><a href="#v:except">except</a> :: <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Action">Action</a> n r s -&gt; [<a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Handler">Handler</a> n r s] -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s</li><li class="src short"><a href="#v:mask">mask</a> :: <a href="Test-DejaFu-Deterministic.html#t:MaskingState">MaskingState</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s</li><li class="src short"><a href="#v:goto">goto</a> :: <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Action">Action</a> n r s -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s</li><li class="src short"><a href="#v:launch">launch</a> :: <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; ((<span class="keyword">forall</span> b. <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:M">M</a> n r s b -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:M">M</a> n r s b) -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Action">Action</a> n r s) -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s</li><li class="src short"><a href="#v:launch-39-">launch'</a> :: <a href="Test-DejaFu-Deterministic.html#t:MaskingState">MaskingState</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; ((<span class="keyword">forall</span> b. <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:M">M</a> n r s b -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:M">M</a> n r s b) -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Action">Action</a> n r s) -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s</li><li class="src short"><a href="#v:kill">kill</a> :: <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s</li><li class="src short"><a href="#v:block">block</a> :: <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:BlockedOn">BlockedOn</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s</li><li class="src short"><a href="#v:wake">wake</a> :: <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:BlockedOn">BlockedOn</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s -&gt; (<a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s, [<a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a>])</li><li class="src short"><a href="#v:knows">knows</a> :: [<a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Either.html#t:Either">Either</a> <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:CVarId">CVarId</a> <a href="Test-DejaFu-STM-Internal.html#t:CTVarId">CTVarId</a>] -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s</li><li class="src short"><a href="#v:forgets">forgets</a> :: [<a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Either.html#t:Either">Either</a> <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:CVarId">CVarId</a> <a href="Test-DejaFu-STM-Internal.html#t:CTVarId">CTVarId</a>] -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s</li><li class="src short"><a href="#v:fullknown">fullknown</a> :: <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s</li></ul></div><div id="interface"><h1 id="g:1">Threads</h1><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Threads" class="def">Threads</a> n r s = <a href="https://hackage.haskell.org/package/containers-0.5.6.2/docs/Data-IntMap-Strict.html#t:IntMap">IntMap</a> (<a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Thread">Thread</a> n r s) <a href="src/Test-DejaFu-Deterministic-Internal-Threading.html#Threads" class="link">Source</a></p><div class="doc"><p>Threads are stored in a map index by <code><a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a></code>.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Thread" class="def">Thread</a> n r s <a href="src/Test-DejaFu-Deterministic-Internal-Threading.html#Thread" class="link">Source</a></p><div class="doc"><p>All the state of a thread.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Thread" class="def">Thread</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:_continuation" class="def">_continuation</a> :: <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Action">Action</a> n r s</dt><dd class="doc"><p>The next action to execute.</p></dd><dt class="src"><a name="v:_blocking" class="def">_blocking</a> :: <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:BlockedOn">BlockedOn</a></dt><dd class="doc"><p>The state of any blocks.</p></dd><dt class="src"><a name="v:_handlers" class="def">_handlers</a> :: [<a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Handler">Handler</a> n r s]</dt><dd class="doc"><p>Stack of exception handlers</p></dd><dt class="src"><a name="v:_masking" class="def">_masking</a> :: <a href="Test-DejaFu-Deterministic.html#t:MaskingState">MaskingState</a></dt><dd class="doc"><p>The exception masking state.</p></dd><dt class="src"><a name="v:_known" class="def">_known</a> :: [<a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Either.html#t:Either">Either</a> <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:CVarId">CVarId</a> <a href="Test-DejaFu-STM-Internal.html#t:CTVarId">CTVarId</a>]</dt><dd class="doc"><p>Shared variables the thread knows about.</p></dd><dt class="src"><a name="v:_fullknown" class="def">_fullknown</a> :: <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a></dt><dd class="doc"><p>Whether the referenced variables of the thread are completely
 known. If every thread has _fullknown == True, then turn on
 detection of nonglobal deadlock.</p></dd></dl><div class="clear"></div></div></td></tr></table></div></div><div class="top"><p class="src"><a name="v:mkthread" class="def">mkthread</a> :: <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Action">Action</a> n r s -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Thread">Thread</a> n r s <a href="src/Test-DejaFu-Deterministic-Internal-Threading.html#mkthread" class="link">Source</a></p><div class="doc"><p>Construct a thread with just one action</p></div></div><h1 id="g:2">Blocking</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:BlockedOn" class="def">BlockedOn</a> <a href="src/Test-DejaFu-Deterministic-Internal-Threading.html#BlockedOn" class="link">Source</a></p><div class="doc"><p>A <code>BlockedOn</code> is used to determine what sort of variable a thread
 is blocked on.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:OnCVarFull" class="def">OnCVarFull</a> <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:CVarId">CVarId</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:OnCVarEmpty" class="def">OnCVarEmpty</a> <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:CVarId">CVarId</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:OnCTVar" class="def">OnCTVar</a> [<a href="Test-DejaFu-STM-Internal.html#t:CTVarId">CTVarId</a>]</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:OnMask" class="def">OnMask</a> <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:BlockedOn" class="caption collapser" onclick="toggleSection('i:BlockedOn')">Instances</p><div id="section.i:BlockedOn" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Eq.html#t:Eq">Eq</a> <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:BlockedOn">BlockedOn</a></span> <a href="src/Test-DejaFu-Deterministic-Internal-Threading.html#line-54" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:-126--61-" class="def">(~=)</a> :: <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Thread">Thread</a> n r s -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:BlockedOn">BlockedOn</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a> <a href="src/Test-DejaFu-Deterministic-Internal-Threading.html#~%3D" class="link">Source</a></p><div class="doc"><p>Determine if a thread is blocked in a certain way.</p></div></div><div class="top"><p class="src"><a name="v:isLocked" class="def">isLocked</a> :: <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r a -&gt; <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a> <a href="src/Test-DejaFu-Deterministic-Internal-Threading.html#isLocked" class="link">Source</a></p><div class="doc"><p>Determine if a thread is deadlocked. If at least one thread is
 not in a fully-known state, this will only check for global
 deadlock.</p></div></div><h1 id="g:3">Exceptions</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Handler" class="def">Handler</a> n r s <a href="src/Test-DejaFu-Deterministic-Internal-Threading.html#Handler" class="link">Source</a></p><div class="doc"><p>An exception handler.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><span class="keyword">forall</span> e . <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Control-Exception-Base.html#t:Exception">Exception</a> e =&gt; <a name="v:Handler" class="def">Handler</a> (e -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Action">Action</a> n r s)</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a name="v:propagate" class="def">propagate</a> :: <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Control-Exception-Base.html#t:SomeException">SomeException</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s -&gt; <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s) <a href="src/Test-DejaFu-Deterministic-Internal-Threading.html#propagate" class="link">Source</a></p><div class="doc"><p>Propagate an exception upwards, finding the closest handler
 which can deal with it.</p></div></div><div class="top"><p class="src"><a name="v:interruptible" class="def">interruptible</a> :: <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Thread">Thread</a> n r s -&gt; <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool">Bool</a> <a href="src/Test-DejaFu-Deterministic-Internal-Threading.html#interruptible" class="link">Source</a></p><div class="doc"><p>Check if a thread can be interrupted by an exception.</p></div></div><div class="top"><p class="src"><a name="v:catching" class="def">catching</a> :: <a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Control-Exception-Base.html#t:Exception">Exception</a> e =&gt; (e -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Action">Action</a> n r s) -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s <a href="src/Test-DejaFu-Deterministic-Internal-Threading.html#catching" class="link">Source</a></p><div class="doc"><p>Register a new exception handler.</p></div></div><div class="top"><p class="src"><a name="v:uncatching" class="def">uncatching</a> :: <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s <a href="src/Test-DejaFu-Deterministic-Internal-Threading.html#uncatching" class="link">Source</a></p><div class="doc"><p>Remove the most recent exception handler.</p></div></div><div class="top"><p class="src"><a name="v:except" class="def">except</a> :: <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Action">Action</a> n r s -&gt; [<a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Handler">Handler</a> n r s] -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s <a href="src/Test-DejaFu-Deterministic-Internal-Threading.html#except" class="link">Source</a></p><div class="doc"><p>Raise an exception in a thread.</p></div></div><div class="top"><p class="src"><a name="v:mask" class="def">mask</a> :: <a href="Test-DejaFu-Deterministic.html#t:MaskingState">MaskingState</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s <a href="src/Test-DejaFu-Deterministic-Internal-Threading.html#mask" class="link">Source</a></p><div class="doc"><p>Set the masking state of a thread.</p></div></div><h1 id="g:4">Manipulating threads</h1><div class="top"><p class="src"><a name="v:goto" class="def">goto</a> :: <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Action">Action</a> n r s -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s <a href="src/Test-DejaFu-Deterministic-Internal-Threading.html#goto" class="link">Source</a></p><div class="doc"><p>Replace the <code>Action</code> of a thread.</p></div></div><div class="top"><p class="src"><a name="v:launch" class="def">launch</a> :: <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; ((<span class="keyword">forall</span> b. <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:M">M</a> n r s b -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:M">M</a> n r s b) -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Action">Action</a> n r s) -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s <a href="src/Test-DejaFu-Deterministic-Internal-Threading.html#launch" class="link">Source</a></p><div class="doc"><p>Start a thread with the given ID, inheriting the masking state
 from the parent thread. This ID must not already be in use!</p></div></div><div class="top"><p class="src"><a name="v:launch-39-" class="def">launch'</a> :: <a href="Test-DejaFu-Deterministic.html#t:MaskingState">MaskingState</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; ((<span class="keyword">forall</span> b. <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:M">M</a> n r s b -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:M">M</a> n r s b) -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:Action">Action</a> n r s) -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s <a href="src/Test-DejaFu-Deterministic-Internal-Threading.html#launch%27" class="link">Source</a></p><div class="doc"><p>Start a thread with the given ID and masking state. This must not already be in use!</p></div></div><div class="top"><p class="src"><a name="v:kill" class="def">kill</a> :: <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s <a href="src/Test-DejaFu-Deterministic-Internal-Threading.html#kill" class="link">Source</a></p><div class="doc"><p>Kill a thread.</p></div></div><div class="top"><p class="src"><a name="v:block" class="def">block</a> :: <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:BlockedOn">BlockedOn</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s <a href="src/Test-DejaFu-Deterministic-Internal-Threading.html#block" class="link">Source</a></p><div class="doc"><p>Block a thread.</p></div></div><div class="top"><p class="src"><a name="v:wake" class="def">wake</a> :: <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:BlockedOn">BlockedOn</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s -&gt; (<a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s, [<a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a>]) <a href="src/Test-DejaFu-Deterministic-Internal-Threading.html#wake" class="link">Source</a></p><div class="doc"><p>Unblock all threads waiting on the appropriate block. For <code>CTVar</code>
 blocks, this will wake all threads waiting on at least one of the
 given <code>CTVar</code>s.</p></div></div><div class="top"><p class="src"><a name="v:knows" class="def">knows</a> :: [<a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Either.html#t:Either">Either</a> <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:CVarId">CVarId</a> <a href="Test-DejaFu-STM-Internal.html#t:CTVarId">CTVarId</a>] -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s <a href="src/Test-DejaFu-Deterministic-Internal-Threading.html#knows" class="link">Source</a></p><div class="doc"><p>Record that a thread knows about a shared variable.</p></div></div><div class="top"><p class="src"><a name="v:forgets" class="def">forgets</a> :: [<a href="https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Either.html#t:Either">Either</a> <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:CVarId">CVarId</a> <a href="Test-DejaFu-STM-Internal.html#t:CTVarId">CTVarId</a>] -&gt; <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s <a href="src/Test-DejaFu-Deterministic-Internal-Threading.html#forgets" class="link">Source</a></p><div class="doc"><p>Forget about a shared variable.</p></div></div><div class="top"><p class="src"><a name="v:fullknown" class="def">fullknown</a> :: <a href="Test-DejaFu-Deterministic-Internal-Common.html#t:ThreadId">ThreadId</a> -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s -&gt; <a href="Test-DejaFu-Deterministic-Internal-Threading.html#t:Threads">Threads</a> n r s <a href="src/Test-DejaFu-Deterministic-Internal-Threading.html#fullknown" class="link">Source</a></p><div class="doc"><p>Record that a thread's shared variable state is fully known.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>