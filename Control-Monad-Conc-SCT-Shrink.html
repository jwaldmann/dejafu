<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Control.Monad.Conc.SCT.Shrink</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Control-Monad-Conc-SCT-Shrink.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Control-Monad-Conc-SCT-Shrink.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">monad-conc-0.0.0.0: Overloadable primitives for potentially non-deterministic concurrency.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Control.Monad.Conc.SCT.Shrink</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Trace shrinking
</a></li><li><a href="#g:2">Utilities
</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Functions for attempting to find maximally simple traces
 producing a given result.
</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:shrink">shrink</a> :: Eq a =&gt; (Maybe a, <a href="Control-Monad-Conc-SCT.html#t:SCTTrace">SCTTrace</a>) -&gt; (<span class="keyword">forall</span> t.  <a href="Control-Monad-Conc-Fixed.html#t:Conc">Conc</a> t a) -&gt; <a href="Control-Monad-Conc-SCT.html#t:SCTTrace">SCTTrace</a></li><li class="src short"><a href="#v:shrink-39-">shrink'</a> ::  (Maybe a -&gt; Bool) -&gt; <a href="Control-Monad-Conc-SCT.html#t:SCTTrace">SCTTrace</a> -&gt; (<span class="keyword">forall</span> t.  <a href="Control-Monad-Conc-Fixed.html#t:Conc">Conc</a> t a) -&gt; <a href="Control-Monad-Conc-SCT.html#t:SCTTrace">SCTTrace</a></li><li class="src short"><a href="#v:shrinkIO">shrinkIO</a> :: Eq a =&gt; (Maybe a, <a href="Control-Monad-Conc-SCT.html#t:SCTTrace">SCTTrace</a>) -&gt; (<span class="keyword">forall</span> t.  <a href="Control-Monad-Conc-Fixed-IO.html#t:Conc">Conc</a> t a) -&gt; IO <a href="Control-Monad-Conc-SCT.html#t:SCTTrace">SCTTrace</a></li><li class="src short"><a href="#v:shrinkIO-39-">shrinkIO'</a> ::  (Maybe a -&gt; Bool) -&gt; <a href="Control-Monad-Conc-SCT.html#t:SCTTrace">SCTTrace</a> -&gt; (<span class="keyword">forall</span> t.  <a href="Control-Monad-Conc-Fixed-IO.html#t:Conc">Conc</a> t a) -&gt; IO <a href="Control-Monad-Conc-SCT.html#t:SCTTrace">SCTTrace</a></li><li class="src short"><a href="#v:candidates">candidates</a> :: <a href="Control-Monad-Conc-SCT.html#t:SCTTrace">SCTTrace</a> -&gt; [([<a href="Control-Monad-Conc-SCT.html#t:Decision">Decision</a>], <a href="Control-Monad-Conc-Fixed-Schedulers.html#t:ThreadId">ThreadId</a>)]</li><li class="src short"><a href="#v:try">try</a> ::  (Maybe a -&gt; Bool) -&gt; [<a href="Control-Monad-Conc-SCT.html#t:Decision">Decision</a>] -&gt; (<span class="keyword">forall</span> t.  <a href="Control-Monad-Conc-Fixed.html#t:Conc">Conc</a> t a) -&gt; [<a href="Control-Monad-Conc-SCT.html#t:SCTTrace">SCTTrace</a>]</li><li class="src short"><a href="#v:tryIO">tryIO</a> ::  (Maybe a -&gt; Bool) -&gt; [<a href="Control-Monad-Conc-SCT.html#t:Decision">Decision</a>] -&gt; (<span class="keyword">forall</span> t.  <a href="Control-Monad-Conc-Fixed-IO.html#t:Conc">Conc</a> t a) -&gt; IO [<a href="Control-Monad-Conc-SCT.html#t:SCTTrace">SCTTrace</a>]</li><li class="src short"><a href="#v:essential">essential</a> :: ([<a href="Control-Monad-Conc-SCT.html#t:Decision">Decision</a>], <a href="Control-Monad-Conc-Fixed-Schedulers.html#t:ThreadId">ThreadId</a>) -&gt; [<a href="Control-Monad-Conc-SCT.html#t:SCTTrace">SCTTrace</a>] -&gt; Bool</li><li class="src short"><a href="#v:simplest">simplest</a> :: [<a href="Control-Monad-Conc-SCT.html#t:SCTTrace">SCTTrace</a>] -&gt; Maybe <a href="Control-Monad-Conc-SCT.html#t:SCTTrace">SCTTrace</a></li></ul></div><div id="interface"><h1 id="g:1">Trace shrinking
</h1><div class="top"><p class="src"><a name="v:shrink" class="def">shrink</a> :: Eq a =&gt; (Maybe a, <a href="Control-Monad-Conc-SCT.html#t:SCTTrace">SCTTrace</a>) -&gt; (<span class="keyword">forall</span> t.  <a href="Control-Monad-Conc-Fixed.html#t:Conc">Conc</a> t a) -&gt; <a href="Control-Monad-Conc-SCT.html#t:SCTTrace">SCTTrace</a><a href="src/Control-Monad-Conc-SCT-Shrink.html#shrink" class="link">Source</a></p><div class="doc"><p>Attempt to find a trace with a minimal number of pre-emptions
 that gives rise to the desired output.
</p></div></div><div class="top"><p class="src"><a name="v:shrink-39-" class="def">shrink'</a> ::  (Maybe a -&gt; Bool) -&gt; <a href="Control-Monad-Conc-SCT.html#t:SCTTrace">SCTTrace</a> -&gt; (<span class="keyword">forall</span> t.  <a href="Control-Monad-Conc-Fixed.html#t:Conc">Conc</a> t a) -&gt; <a href="Control-Monad-Conc-SCT.html#t:SCTTrace">SCTTrace</a><a href="src/Control-Monad-Conc-SCT-Shrink.html#shrink%27" class="link">Source</a></p><div class="doc"><p>Variant of <code><a href="Control-Monad-Conc-SCT-Shrink.html#v:shrink">shrink</a></code> which takes a function to determine if the
 result is erroneous in the same way.
</p></div></div><div class="top"><p class="src"><a name="v:shrinkIO" class="def">shrinkIO</a> :: Eq a =&gt; (Maybe a, <a href="Control-Monad-Conc-SCT.html#t:SCTTrace">SCTTrace</a>) -&gt; (<span class="keyword">forall</span> t.  <a href="Control-Monad-Conc-Fixed-IO.html#t:Conc">Conc</a> t a) -&gt; IO <a href="Control-Monad-Conc-SCT.html#t:SCTTrace">SCTTrace</a><a href="src/Control-Monad-Conc-SCT-Shrink.html#shrinkIO" class="link">Source</a></p><div class="doc"><p>Variant of <code><a href="Control-Monad-Conc-SCT-Shrink.html#v:shrink">shrink</a></code> for <code>IO</code>. See usual caveats about <code>IO</code>.
</p></div></div><div class="top"><p class="src"><a name="v:shrinkIO-39-" class="def">shrinkIO'</a> ::  (Maybe a -&gt; Bool) -&gt; <a href="Control-Monad-Conc-SCT.html#t:SCTTrace">SCTTrace</a> -&gt; (<span class="keyword">forall</span> t.  <a href="Control-Monad-Conc-Fixed-IO.html#t:Conc">Conc</a> t a) -&gt; IO <a href="Control-Monad-Conc-SCT.html#t:SCTTrace">SCTTrace</a><a href="src/Control-Monad-Conc-SCT-Shrink.html#shrinkIO%27" class="link">Source</a></p><div class="doc"><p>Variant of <code><a href="Control-Monad-Conc-SCT-Shrink.html#v:shrinkIO">shrinkIO</a></code> which takes a function to determine if the
 result is erroneous in the same way. See usual caveats about <code>IO</code>.
</p></div></div><h1 id="g:2">Utilities
</h1><div class="doc"><p>If you wanted to implement your own shrinking logic, these are
 the building blocks.
</p></div><div class="top"><p class="src"><a name="v:candidates" class="def">candidates</a> :: <a href="Control-Monad-Conc-SCT.html#t:SCTTrace">SCTTrace</a> -&gt; [([<a href="Control-Monad-Conc-SCT.html#t:Decision">Decision</a>], <a href="Control-Monad-Conc-Fixed-Schedulers.html#t:ThreadId">ThreadId</a>)]<a href="src/Control-Monad-Conc-SCT-Shrink.html#candidates" class="link">Source</a></p><div class="doc"><p>Generate all candidate trace prefixes from a trace. These are
 produced by attempting to drop one pre-emption. Furthermore, the
 <code><a href="Control-Monad-Conc-Fixed-Schedulers.html#t:ThreadId">ThreadId</a></code> of the thread which performed the dropped pre-emption is
 also returned.
</p></div></div><div class="top"><p class="src"><a name="v:try" class="def">try</a> ::  (Maybe a -&gt; Bool) -&gt; [<a href="Control-Monad-Conc-SCT.html#t:Decision">Decision</a>] -&gt; (<span class="keyword">forall</span> t.  <a href="Control-Monad-Conc-Fixed.html#t:Conc">Conc</a> t a) -&gt; [<a href="Control-Monad-Conc-SCT.html#t:SCTTrace">SCTTrace</a>]<a href="src/Control-Monad-Conc-SCT-Shrink.html#try" class="link">Source</a></p><div class="doc"><p>Try all traces with a given trace prefix and return those which
 satisfy the predicate.
</p></div></div><div class="top"><p class="src"><a name="v:tryIO" class="def">tryIO</a> ::  (Maybe a -&gt; Bool) -&gt; [<a href="Control-Monad-Conc-SCT.html#t:Decision">Decision</a>] -&gt; (<span class="keyword">forall</span> t.  <a href="Control-Monad-Conc-Fixed-IO.html#t:Conc">Conc</a> t a) -&gt; IO [<a href="Control-Monad-Conc-SCT.html#t:SCTTrace">SCTTrace</a>]<a href="src/Control-Monad-Conc-SCT-Shrink.html#tryIO" class="link">Source</a></p><div class="doc"><p>Variant of <code><a href="Control-Monad-Conc-SCT-Shrink.html#v:try">try</a></code> for <code>IO</code> See usual caveats about <code>IO</code>.
</p></div></div><div class="top"><p class="src"><a name="v:essential" class="def">essential</a> :: ([<a href="Control-Monad-Conc-SCT.html#t:Decision">Decision</a>], <a href="Control-Monad-Conc-Fixed-Schedulers.html#t:ThreadId">ThreadId</a>) -&gt; [<a href="Control-Monad-Conc-SCT.html#t:SCTTrace">SCTTrace</a>] -&gt; Bool<a href="src/Control-Monad-Conc-SCT-Shrink.html#essential" class="link">Source</a></p><div class="doc"><p>Given a list of <code>SCTTraces</code> which follow on from a given prefix,
 determine if the removed pre-emption is &quot;essential&quot;. That is,
 every <code><a href="Control-Monad-Conc-SCT.html#t:SCTTrace">SCTTrace</a></code> starts with the prefix followed by a pre-emption
 to the given thread.
</p></div></div><div class="top"><p class="src"><a name="v:simplest" class="def">simplest</a> :: [<a href="Control-Monad-Conc-SCT.html#t:SCTTrace">SCTTrace</a>] -&gt; Maybe <a href="Control-Monad-Conc-SCT.html#t:SCTTrace">SCTTrace</a><a href="src/Control-Monad-Conc-SCT-Shrink.html#simplest" class="link">Source</a></p><div class="doc"><p>Return the simplest <code><a href="Control-Monad-Conc-SCT.html#t:SCTTrace">SCTTrace</a></code> from a collection. Roughly, the
 one with the fewest pre-emptions. If the list is empty, return
 <code>Nothing</code>.
</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.13.2.1</p></div></body></html>