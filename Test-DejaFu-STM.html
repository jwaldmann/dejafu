<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Test.DejaFu.STM</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Test-DejaFu-STM.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Test-DejaFu-STM.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">dejafu-0.2.0.0: Overloadable primitives for testable, potentially non-deterministic, concurrency.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Test.DejaFu.STM</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">The <code>STMLike</code> Monad</a></li><li><a href="#g:2">Software Transactional Memory</a></li><li><a href="#g:3"><code>CTVar</code>s</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>A <code>MonadSTM</code> implementation, which can be run on top of <code><a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/System-IO.html#t:IO">IO</a></code> or
 <code><a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Control-Monad-ST.html#t:ST">ST</a></code>.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:STMLike">STMLike</a> t n r a</li><li class="src short"><span class="keyword">type</span> <a href="#t:STMST">STMST</a> t a = <a href="Test-DejaFu-STM.html#t:STMLike">STMLike</a> t (<a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Control-Monad-ST.html#t:ST">ST</a> t) (<a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Data-STRef.html#t:STRef">STRef</a> t) a</li><li class="src short"><span class="keyword">type</span> <a href="#t:STMIO">STMIO</a> t a = <a href="Test-DejaFu-STM.html#t:STMLike">STMLike</a> t <a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/System-IO.html#t:IO">IO</a> <a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Data-IORef.html#t:IORef">IORef</a> a</li><li class="src short"><span class="keyword">data</span> <a href="#t:Result">Result</a> a<ul class="subs"><li>= <a href="#v:Success">Success</a> [<a href="Test-DejaFu-STM.html#t:CTVarId">CTVarId</a>] [<a href="Test-DejaFu-STM.html#t:CTVarId">CTVarId</a>] a</li><li>| <a href="#v:Retry">Retry</a> [<a href="Test-DejaFu-STM.html#t:CTVarId">CTVarId</a>]</li><li>| <a href="#v:Exception">Exception</a> <a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Control-Exception-Base.html#t:SomeException">SomeException</a></li></ul></li><li class="src short"><a href="#v:runTransaction">runTransaction</a> :: (<span class="keyword">forall</span> t. <a href="Test-DejaFu-STM.html#t:STMST">STMST</a> t a) -&gt; <a href="Test-DejaFu-STM.html#t:Result">Result</a> a</li><li class="src short"><a href="#v:runTransactionST">runTransactionST</a> :: <a href="Test-DejaFu-STM.html#t:STMST">STMST</a> t a -&gt; <a href="Test-DejaFu-STM.html#t:CTVarId">CTVarId</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Control-Monad-ST.html#t:ST">ST</a> t (<a href="Test-DejaFu-STM.html#t:Result">Result</a> a, <a href="Test-DejaFu-STM.html#t:CTVarId">CTVarId</a>)</li><li class="src short"><a href="#v:runTransactionIO">runTransactionIO</a> :: <a href="Test-DejaFu-STM.html#t:STMIO">STMIO</a> t a -&gt; <a href="Test-DejaFu-STM.html#t:CTVarId">CTVarId</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/System-IO.html#t:IO">IO</a> (<a href="Test-DejaFu-STM.html#t:Result">Result</a> a, <a href="Test-DejaFu-STM.html#t:CTVarId">CTVarId</a>)</li><li class="src short"><a href="#v:retry">retry</a> :: <a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Control-Monad.html#t:Monad">Monad</a> n =&gt; <a href="Test-DejaFu-STM.html#t:STMLike">STMLike</a> t n r a</li><li class="src short"><a href="#v:orElse">orElse</a> :: <a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Control-Monad.html#t:Monad">Monad</a> n =&gt; <a href="Test-DejaFu-STM.html#t:STMLike">STMLike</a> t n r a -&gt; <a href="Test-DejaFu-STM.html#t:STMLike">STMLike</a> t n r a -&gt; <a href="Test-DejaFu-STM.html#t:STMLike">STMLike</a> t n r a</li><li class="src short"><a href="#v:check">check</a> :: <a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Control-Monad.html#t:Monad">Monad</a> n =&gt; <a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="Test-DejaFu-STM.html#t:STMLike">STMLike</a> t n r ()</li><li class="src short"><a href="#v:throwSTM">throwSTM</a> :: <a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Control-Exception-Base.html#t:Exception">Exception</a> e =&gt; e -&gt; <a href="Test-DejaFu-STM.html#t:STMLike">STMLike</a> t n r a</li><li class="src short"><a href="#v:catchSTM">catchSTM</a> :: <a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Control-Exception-Base.html#t:Exception">Exception</a> e =&gt; <a href="Test-DejaFu-STM.html#t:STMLike">STMLike</a> t n r a -&gt; (e -&gt; <a href="Test-DejaFu-STM.html#t:STMLike">STMLike</a> t n r a) -&gt; <a href="Test-DejaFu-STM.html#t:STMLike">STMLike</a> t n r a</li><li class="src short"><span class="keyword">data</span> <a href="#t:CTVar">CTVar</a> t r a</li><li class="src short"><span class="keyword">type</span> <a href="#t:CTVarId">CTVarId</a> = <a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Data-Int.html#t:Int">Int</a></li><li class="src short"><a href="#v:newCTVar">newCTVar</a> :: <a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Control-Monad.html#t:Monad">Monad</a> n =&gt; a -&gt; <a href="Test-DejaFu-STM.html#t:STMLike">STMLike</a> t n r (<a href="Test-DejaFu-STM.html#t:CTVar">CTVar</a> t r a)</li><li class="src short"><a href="#v:readCTVar">readCTVar</a> :: <a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Control-Monad.html#t:Monad">Monad</a> n =&gt; <a href="Test-DejaFu-STM.html#t:CTVar">CTVar</a> t r a -&gt; <a href="Test-DejaFu-STM.html#t:STMLike">STMLike</a> t n r a</li><li class="src short"><a href="#v:writeCTVar">writeCTVar</a> :: <a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Control-Monad.html#t:Monad">Monad</a> n =&gt; <a href="Test-DejaFu-STM.html#t:CTVar">CTVar</a> t r a -&gt; a -&gt; <a href="Test-DejaFu-STM.html#t:STMLike">STMLike</a> t n r ()</li></ul></div><div id="interface"><h1 id="g:1">The <code>STMLike</code> Monad</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:STMLike" class="def">STMLike</a> t n r a <a href="src/Test-DejaFu-STM.html#STMLike" class="link">Source</a></p><div class="doc"><p>The <code>MonadSTM</code> implementation, it encapsulates a single atomic
 transaction. The environment, that is, the collection of defined
 <code><a href="Test-DejaFu-STM.html#t:CTVar">CTVar</a></code>s is implicit, there is no list of them, they exist purely
 as references. This makes the types simpler, but means you can't
 really get an aggregate of them (if you ever wanted to for some
 reason).</p></div><div class="subs instances"><p id="control.i:STMLike" class="caption collapser" onclick="toggleSection('i:STMLike')">Instances</p><div id="section.i:STMLike" class="show"><table><tr><td class="src"><a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Control-Monad.html#t:Monad">Monad</a> (<a href="Test-DejaFu-STM.html#t:STMLike">STMLike</a> t n r) <a href="src/Test-DejaFu-STM.html#line-57" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Data-Functor.html#t:Functor">Functor</a> (<a href="Test-DejaFu-STM.html#t:STMLike">STMLike</a> t n r) <a href="src/Test-DejaFu-STM.html#line-57" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Control-Applicative.html#t:Applicative">Applicative</a> (<a href="Test-DejaFu-STM.html#t:STMLike">STMLike</a> t n r) <a href="src/Test-DejaFu-STM.html#line-57" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">MonadThrow (<a href="Test-DejaFu-STM.html#t:STMLike">STMLike</a> t n r) <a href="src/Test-DejaFu-STM.html#line-65" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">MonadCatch (<a href="Test-DejaFu-STM.html#t:STMLike">STMLike</a> t n r) <a href="src/Test-DejaFu-STM.html#line-68" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Control-Monad.html#t:Monad">Monad</a> n =&gt; <a href="Control-Monad-STM-Class.html#t:MonadSTM">MonadSTM</a> (<a href="Test-DejaFu-STM.html#t:STMLike">STMLike</a> t n r) <a href="src/Test-DejaFu-STM.html#line-71" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> <a href="Control-Monad-STM-Class.html#t:CTVar">CTVar</a> (<a href="Test-DejaFu-STM.html#t:STMLike">STMLike</a> t n r) = <a href="Test-DejaFu-STM.html#t:CTVar">CTVar</a> t r <a href="src/Test-DejaFu-STM.html#line-72" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:STMST" class="def">STMST</a> t a = <a href="Test-DejaFu-STM.html#t:STMLike">STMLike</a> t (<a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Control-Monad-ST.html#t:ST">ST</a> t) (<a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Data-STRef.html#t:STRef">STRef</a> t) a <a href="src/Test-DejaFu-STM.html#STMST" class="link">Source</a></p><div class="doc"><p>A convenience wrapper around <code><a href="Test-DejaFu-STM.html#t:STMLike">STMLike</a></code> using <code><a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Data-STRef.html#t:STRef">STRef</a></code>s.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:STMIO" class="def">STMIO</a> t a = <a href="Test-DejaFu-STM.html#t:STMLike">STMLike</a> t <a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/System-IO.html#t:IO">IO</a> <a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Data-IORef.html#t:IORef">IORef</a> a <a href="src/Test-DejaFu-STM.html#STMIO" class="link">Source</a></p><div class="doc"><p>A convenience wrapper around <code><a href="Test-DejaFu-STM.html#t:STMLike">STMLike</a></code> using <code><a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Data-IORef.html#t:IORef">IORef</a></code>s.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Result" class="def">Result</a> a <a href="src/Test-DejaFu-STM-Internal.html#Result" class="link">Source</a></p><div class="doc"><p>The result of an STM transaction, along with which <code><a href="Test-DejaFu-STM.html#t:CTVar">CTVar</a></code>s it
 touched whilst executing.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Success" class="def">Success</a> [<a href="Test-DejaFu-STM.html#t:CTVarId">CTVarId</a>] [<a href="Test-DejaFu-STM.html#t:CTVarId">CTVarId</a>] a</td><td class="doc"><p>The transaction completed successfully, reading the first list
 <code><a href="Test-DejaFu-STM.html#t:CTVar">CTVar</a></code>s and writing to the second.</p></td></tr><tr><td class="src"><a name="v:Retry" class="def">Retry</a> [<a href="Test-DejaFu-STM.html#t:CTVarId">CTVarId</a>]</td><td class="doc"><p>The transaction aborted by calling <code>retry</code>, and read the
 returned <code><a href="Test-DejaFu-STM.html#t:CTVar">CTVar</a></code>s. It should be retried when at least one of the
 <code><a href="Test-DejaFu-STM.html#t:CTVar">CTVar</a></code>s has been mutated.</p></td></tr><tr><td class="src"><a name="v:Exception" class="def">Exception</a> <a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Control-Exception-Base.html#t:SomeException">SomeException</a></td><td class="doc"><p>The transaction aborted by throwing an exception.</p></td></tr></table></div><div class="subs instances"><p id="control.i:Result" class="caption collapser" onclick="toggleSection('i:Result')">Instances</p><div id="section.i:Result" class="show"><table><tr><td class="src"><a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Data-Functor.html#t:Functor">Functor</a> <a href="Test-DejaFu-STM.html#t:Result">Result</a> <a href="src/Test-DejaFu-STM-Internal.html#line-75" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Data-Foldable.html#t:Foldable">Foldable</a> <a href="Test-DejaFu-STM.html#t:Result">Result</a> <a href="src/Test-DejaFu-STM-Internal.html#line-80" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Text-Show.html#t:Show">Show</a> a =&gt; <a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Text-Show.html#t:Show">Show</a> (<a href="Test-DejaFu-STM.html#t:Result">Result</a> a) <a href="src/Test-DejaFu-STM-Internal.html#line-73" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:runTransaction" class="def">runTransaction</a> :: (<span class="keyword">forall</span> t. <a href="Test-DejaFu-STM.html#t:STMST">STMST</a> t a) -&gt; <a href="Test-DejaFu-STM.html#t:Result">Result</a> a <a href="src/Test-DejaFu-STM.html#runTransaction" class="link">Source</a></p><div class="doc"><p>Run a transaction in the <code><a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Control-Monad-ST.html#t:ST">ST</a></code> monad, starting from a clean
 environment, and discarding the environment afterwards. This is
 suitable for testing individual transactions, but not for composing
 multiple ones.</p></div></div><div class="top"><p class="src"><a name="v:runTransactionST" class="def">runTransactionST</a> :: <a href="Test-DejaFu-STM.html#t:STMST">STMST</a> t a -&gt; <a href="Test-DejaFu-STM.html#t:CTVarId">CTVarId</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Control-Monad-ST.html#t:ST">ST</a> t (<a href="Test-DejaFu-STM.html#t:Result">Result</a> a, <a href="Test-DejaFu-STM.html#t:CTVarId">CTVarId</a>) <a href="src/Test-DejaFu-STM.html#runTransactionST" class="link">Source</a></p><div class="doc"><p>Run a transaction in the <code><a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Control-Monad-ST.html#t:ST">ST</a></code> monad, returning the result and new
 initial <code><a href="Test-DejaFu-STM.html#t:CTVarId">CTVarId</a></code>. If the transaction ended by calling <code><a href="Test-DejaFu-STM.html#v:retry">retry</a></code>, any
 <code><a href="Test-DejaFu-STM.html#t:CTVar">CTVar</a></code> modifications are undone.</p></div></div><div class="top"><p class="src"><a name="v:runTransactionIO" class="def">runTransactionIO</a> :: <a href="Test-DejaFu-STM.html#t:STMIO">STMIO</a> t a -&gt; <a href="Test-DejaFu-STM.html#t:CTVarId">CTVarId</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/System-IO.html#t:IO">IO</a> (<a href="Test-DejaFu-STM.html#t:Result">Result</a> a, <a href="Test-DejaFu-STM.html#t:CTVarId">CTVarId</a>) <a href="src/Test-DejaFu-STM.html#runTransactionIO" class="link">Source</a></p><div class="doc"><p>Run a transaction in the <code><a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/System-IO.html#t:IO">IO</a></code> monad, returning the result and new
 initial <code><a href="Test-DejaFu-STM.html#t:CTVarId">CTVarId</a></code>. If the transaction ended by calling <code><a href="Test-DejaFu-STM.html#v:retry">retry</a></code>, any
 <code><a href="Test-DejaFu-STM.html#t:CTVar">CTVar</a></code> modifications are undone.</p></div></div><h1 id="g:2">Software Transactional Memory</h1><div class="top"><p class="src"><a name="v:retry" class="def">retry</a> :: <a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Control-Monad.html#t:Monad">Monad</a> n =&gt; <a href="Test-DejaFu-STM.html#t:STMLike">STMLike</a> t n r a <a href="src/Test-DejaFu-STM.html#retry" class="link">Source</a></p><div class="doc"><p>Abort the current transaction, restoring any <code><a href="Test-DejaFu-STM.html#t:CTVar">CTVar</a></code>s written to,
 and returning the list of <code><a href="Test-DejaFu-STM.html#t:CTVar">CTVar</a></code>s read.</p></div></div><div class="top"><p class="src"><a name="v:orElse" class="def">orElse</a> :: <a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Control-Monad.html#t:Monad">Monad</a> n =&gt; <a href="Test-DejaFu-STM.html#t:STMLike">STMLike</a> t n r a -&gt; <a href="Test-DejaFu-STM.html#t:STMLike">STMLike</a> t n r a -&gt; <a href="Test-DejaFu-STM.html#t:STMLike">STMLike</a> t n r a <a href="src/Test-DejaFu-STM.html#orElse" class="link">Source</a></p><div class="doc"><p>Run the first transaction and, if it <code><a href="Test-DejaFu-STM.html#v:retry">retry</a></code>s, </p></div></div><div class="top"><p class="src"><a name="v:check" class="def">check</a> :: <a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Control-Monad.html#t:Monad">Monad</a> n =&gt; <a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="Test-DejaFu-STM.html#t:STMLike">STMLike</a> t n r () <a href="src/Test-DejaFu-STM.html#check" class="link">Source</a></p><div class="doc"><p>Check whether a condition is true and, if not, call <code><a href="Test-DejaFu-STM.html#v:retry">retry</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:throwSTM" class="def">throwSTM</a> :: <a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Control-Exception-Base.html#t:Exception">Exception</a> e =&gt; e -&gt; <a href="Test-DejaFu-STM.html#t:STMLike">STMLike</a> t n r a <a href="src/Test-DejaFu-STM.html#throwSTM" class="link">Source</a></p><div class="doc"><p>Throw an exception. This aborts the transaction and propagates
 the exception.</p></div></div><div class="top"><p class="src"><a name="v:catchSTM" class="def">catchSTM</a> :: <a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Control-Exception-Base.html#t:Exception">Exception</a> e =&gt; <a href="Test-DejaFu-STM.html#t:STMLike">STMLike</a> t n r a -&gt; (e -&gt; <a href="Test-DejaFu-STM.html#t:STMLike">STMLike</a> t n r a) -&gt; <a href="Test-DejaFu-STM.html#t:STMLike">STMLike</a> t n r a <a href="src/Test-DejaFu-STM.html#catchSTM" class="link">Source</a></p><div class="doc"><p>Handling exceptions from <code><a href="Test-DejaFu-STM.html#v:throwSTM">throwSTM</a></code>.</p></div></div><h1 id="g:3"><code>CTVar</code>s</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:CTVar" class="def">CTVar</a> t r a <a href="src/Test-DejaFu-STM-Internal.html#CTVar" class="link">Source</a></p><div class="doc"><p>A <code><a href="Test-DejaFu-STM.html#t:CTVar">CTVar</a></code> is a tuple of a unique ID and the value contained. The
 ID is so that blocked transactions can be re-run when a <code><a href="Test-DejaFu-STM.html#t:CTVar">CTVar</a></code>
 they depend on has changed.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:CTVarId" class="def">CTVarId</a> = <a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Data-Int.html#t:Int">Int</a> <a href="src/Test-DejaFu-STM-Internal.html#CTVarId" class="link">Source</a></p><div class="doc"><p>The unique ID of a <code><a href="Test-DejaFu-STM.html#t:CTVar">CTVar</a></code>. Only meaningful within a single
 concurrent computation.</p></div></div><div class="top"><p class="src"><a name="v:newCTVar" class="def">newCTVar</a> :: <a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Control-Monad.html#t:Monad">Monad</a> n =&gt; a -&gt; <a href="Test-DejaFu-STM.html#t:STMLike">STMLike</a> t n r (<a href="Test-DejaFu-STM.html#t:CTVar">CTVar</a> t r a) <a href="src/Test-DejaFu-STM.html#newCTVar" class="link">Source</a></p><div class="doc"><p>Create a new <code><a href="Test-DejaFu-STM.html#t:CTVar">CTVar</a></code> containing the given value.</p></div></div><div class="top"><p class="src"><a name="v:readCTVar" class="def">readCTVar</a> :: <a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Control-Monad.html#t:Monad">Monad</a> n =&gt; <a href="Test-DejaFu-STM.html#t:CTVar">CTVar</a> t r a -&gt; <a href="Test-DejaFu-STM.html#t:STMLike">STMLike</a> t n r a <a href="src/Test-DejaFu-STM.html#readCTVar" class="link">Source</a></p><div class="doc"><p>Return the current value stored in a <code><a href="Test-DejaFu-STM.html#t:CTVar">CTVar</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:writeCTVar" class="def">writeCTVar</a> :: <a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Control-Monad.html#t:Monad">Monad</a> n =&gt; <a href="Test-DejaFu-STM.html#t:CTVar">CTVar</a> t r a -&gt; a -&gt; <a href="Test-DejaFu-STM.html#t:STMLike">STMLike</a> t n r () <a href="src/Test-DejaFu-STM.html#writeCTVar" class="link">Source</a></p><div class="doc"><p>Write the supplied value into the <code><a href="Test-DejaFu-STM.html#t:CTVar">CTVar</a></code>.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.0</p></div></body></html>